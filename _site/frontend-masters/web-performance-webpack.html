<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>Web Performance with Webpack | FED Notes & Resources</title>



<meta name="description" content="These are notes from the 'Web Performance with Webpack' course on Frontend Masters.">



<link rel="shortcut icon" type="image/ico"
  href="">

<link rel="icon" type="image/png"
  href="/assets/uswds/img/favicons/favicon.png">

<link rel="icon" type="image/png"
  sizes="192x192"
  href="/assets/uswds/img/favicons/favicon-192.png">

<link rel="apple-touch-icon-precomposed" type=""
  href="/assets/uswds/img/favicons/favicon-57.png">

<link rel="apple-touch-icon-precomposed" type=""
  sizes="72x72"
  href="/assets/uswds/img/favicons/favicon-72.png">

<link rel="apple-touch-icon-precomposed" type=""
  sizes="114x114"
  href="/assets/uswds/img/favicons/favicon-114.png">

<link rel="apple-touch-icon-precomposed" type=""
  sizes="144x144"
  href="/assets/uswds/img/favicons/favicon-144.png">



    



<link rel="stylesheet"
  href="/assets/css/main.css"
  media="screen">


    
  </head>
  <body class="  ">

    <a class="usa-skipnav" href="#main-content">Skip to main content</a>

    


  <section class="usa-banner">
  <div class="usa-accordion">
    <!-- <header class="usa-banner-header">
      <div class="usa-grid usa-banner-inner"> <img src="/assets/uswds/img/favicons/favicon-57.png" alt="U.S. flag">
        <p>An official website of the United States government</p> <button class="usa-accordion-button usa-banner-button" aria-expanded="false" aria-controls="gov-banner"> <span class="usa-banner-button-text">Here's how you know</span> </button> </div>
    </header> -->
    <div class="usa-banner-content usa-grid usa-accordion-content" id="gov-banner">
      <div class="usa-banner-guidance-gov usa-width-one-half"> <img class="usa-banner-icon usa-media_block-img" src="/assets/uswds/img/icon-dot-gov.svg" alt="Dot gov">
        <div class="usa-media_block-body">
          <p> <strong>The .gov means it’s official.</strong> <br> Federal government websites often end in .gov or .mil. Before sharing sensitive information, make sure you’re on a federal government site. </p>
        </div>
      </div>
      <div class="usa-banner-guidance-ssl usa-width-one-half"> <img class="usa-banner-icon usa-media_block-img" src="/assets/uswds/img/icon-https.svg" alt="Https">
        <div class="usa-media_block-body">
          <p> <strong>The site is secure.</strong> <br> The <strong>https://</strong> ensures that you are connecting to the official website and that any information you provide is encrypted and transmitted securely. </p>
        </div>
      </div>
    </div>
  </div>
</section>






  <header class="usa-header usa-header-extended" role="banner" id="usa-header">


  
    <div class="usa-navbar">
      <button class="usa-menu-btn">Menu</button>
      <div class="usa-logo" id="extended-mega-logo">
        <a href="/" title="Home">
          
            <img class="usa-logo-img" src="/assets/img/hztl-wm.svg" alt="HZTL-WM">
          
          <em class="usa-logo-text">
            FED Notes & Resources
          </em>
        </a>
      </div>
    </div>

    <nav role="navigation" class="usa-nav">
      <div class="usa-nav-inner">
        <button class="usa-nav-close">
          <img src="/assets/uswds/img/close.svg" alt="close">
        </button>

        
        
        
        <ul class="usa-nav-primary usa-accordion">
          
          <li>
            
              <a class=" usa-nav-link  " href="/resources/">
                <span>Resources</span>
              </a>
            
          </li>
          
          <li>
            
              
              
              
            <button class="usa-accordion-button usa-nav-link" aria-expanded="false" aria-controls="nav-2">
              <span>Frontend Masters Workshop Notes</span>
            </button>
            
            <ul id="nav-2" class="usa-nav-submenu" aria-hidden="true">
            
            
              
                
                <li>
                  <a href="/frontend-masters/fundamentals-functional-js">Javascript: From Fundamentals to Functional JS</a>
                </li>
                
              
                
                <li>
                  <a href="/frontend-masters/hard-parts-js">Javascript: The Hard Parts, v2</a>
                </li>
                
              
                
                <li>
                  <a href="/frontend-masters/deep-javascript-foundations">Deep Javascript Foundations, v3</a>
                </li>
                
              
                
                <li>
                  <a href="/frontend-masters/webpack-4-fundamentals">Webpack 4 Fundamentals</a>
                </li>
                
              
                
                <li>
                  <a href="/frontend-masters/web-performance-webpack">Web Performance with Webpack</a>
                </li>
                
              
            
            </ul>
            
            
            
          </li>
          
          <li>
            
              
              
              
            <button class="usa-accordion-button usa-nav-link" aria-expanded="false" aria-controls="nav-3">
              <span>Sitecore Workshop Notes</span>
            </button>
            
            <ul id="nav-3" class="usa-nav-submenu" aria-hidden="true">
            
            
              
                
                <li>
                  <a href="/sitecore/jss">Sitecore JSS Fundamentals</a>
                </li>
                
              
            
            </ul>
            
            
            
          </li>
          
        </ul>
        

        

          
          
          <div class="usa-nav-secondary">
            
            <ul class="usa-unstyled-list usa-nav-secondary-links">
              
              
              
                <li>
                  <a href=""
                  >
                    
                  </a>
                </li>
              
            </ul>
          </div>
          


        </div>
      </div>
    </nav>
  
  <div class="main-top">
      <div class="progress-container">
        <div class="progress-bar" id="progress"></div>
      </div>
    </div>
  </header>
  <div class="usa-overlay"></div>




    
    


    

    

    
      
      




    
    

    <main id="main-content" class="usa-grid usa-section usa-content usa-layout-docs">
          


<div class="usa-layout-docs-main_content">
  
    <h1>Web Performance with Webpack</h1>
  
  <h2 id="web-performance">Web Performance</h2>

<h3 id="top-performance-issues">Top Performance Issues</h3>

<p>What are the top three causes of web performance issues?</p>

<ul>
  <li>Amount of JavaScript for initial download</li>
  <li>Amount of CSS for initial download</li>
  <li>Amount of Network Requests on initial download</li>
</ul>

<h3 id="performance-goals">Performance Goals</h3>

<ul>
  <li>&lt;= 200KB (uncompressed) initial JavaScript [total]</li>
  <li>&lt;= 100KB (uncompressed) initial CSS [total]</li>
  <li>HTTP: &lt;= 6 initial network calls</li>
  <li>HTTP/2 &lt;= 20 initial network calls</li>
  <li>90% code coverage (only 10% code unused)</li>
</ul>

<p>The above performance goals will ensure that you have a fast loading website / application across all user experiences, even in emerging markets.</p>

<h3 id="code-coverage">Code Coverage</h3>

<p>How can you determine your code coverage? Google’s Chrome browser has a feature in its Dev Tools that lets you look at code coverage. With Dev Tools open, press <code class="language-plaintext highlighter-rouge">Shift+⌘+P</code> and type <code class="language-plaintext highlighter-rouge">coverage</code>, then select the first option and click the reload icon. You will then see all of the files and what their code coverage is. This approach to looking at code coverage is a little time consuming, but is currently the only way to check code coverage. It is important to establish performance as a first class citizen, to make performance a priority amongst your team(s). At the bottom of the code coverage view, you can see the total code coverage for all of your files.</p>

<h3 id="code-splitting">Code Splitting</h3>

<p>Google Web Toolkit first introduced the concept of code splitting. They allowed asynchronous code to be loaded dynamically, so (for example) if you had a piece of code that was only needed when a button was clicked, that code could then be imported and run. Code splitting is the process of splitting pieces of your code into async chunks [at build time]. Code splitting [according to Webpack] is arguably one of the most important considerations to undertake when enabling performance in web applications.</p>

<p>How does it work? Webpack, under the hood, takes your entry point and passes it to a resolver where you must make sure the file exists [if it doesn’t exist, you cannot parse and read it]. Webpack then reads the source code, looks for dependency statements like imports, requires, Common JS, AMD syntax, etc… And then Webpack puts object models called dependencies on them. This information is then leveraged to separate everything in the graph into a separate bundle, flatten it, and create it.</p>

<h2 id="code-splitting-1">Code Splitting</h2>

<h3 id="types-of-code-splitting">Types of Code Splitting</h3>

<p>The future of web is mobile, the average mobile website takes 14 seconds to get interactive, loading less code =&gt; interactive faster.</p>

<p>In the context of Webpack, when referring to ‘dynamic imports’, this <code class="language-plaintext highlighter-rouge">import();</code> is the syntax it refers to. This would allow you to, at runtime, dynamically fetch any piece of JavaScript and use it like a module. There are some issues with this though; you cannot optimize anything that you are doing dynamically, there are some security concerns, and there is no complete browser interoperability on the syntax.</p>

<p>The two types of code splitting are static and “dynamic”. Static code splitting is useful to use whenever you have a “heavy” JavaScript library that you need to use, but you might not need it up front, anything temporal (i.e. anything that is not there at load, but can appear at some point… modal, tooltip, dialog box), routes; anytime you have routes set up (especially client-side routes), you can split the code for those routes so the user is only loading the relevant code for the route that they are on.</p>

<h3 id="code-splitting-demonstration">Code Splitting Demonstration</h3>

<p>Take a look at the following pseudo code for an example of code splitting:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">Listener</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./listeners.js</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">getModal</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">./src/modal.js</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">Listener</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">didSomethingToWarrantModalBeingLoaded</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Async fetching modal code from a separate chunk</span>
    <span class="nx">getModal</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">module</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">modalTarget</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">Modal</span><span class="dl">'</span><span class="p">);</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initModal</span><span class="p">(</span><span class="nx">modalTarget</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span></code></pre></figure>

<p>Walking through the above code, we are first importing <code class="language-plaintext highlighter-rouge">Listener</code>, then assigning a function that returns a dynamic import statement and a path to a module. Finally, when an event occurs, the above code is returning a promise that will, on promise fulfillment, perform the functionality. In the <a href="/frontend-masters/webpack-4-fundamentals">Webpack 4 Fundamentals workshop</a> [see the bottom of the page, “Q&amp;A Section”], this was shown when clicking on a button and then loading the footer code. If you are lazy… here’s the code example:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// from index.js in the workshop repo</span>
<span class="c1">//..</span>
<span class="kd">const</span> <span class="nx">loadFooter</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">./footer</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">//..</span>

<span class="nx">button</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="nx">e</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">loadFooter</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">m</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">footer</span><span class="p">)</span> <span class="c1">// moved from below</span>
    <span class="p">});</span>
<span class="p">});</span></code></pre></figure>

<h3 id="webpack-code-splitting-under-the-hood">Webpack Code Splitting Under the Hood</h3>

<h3 id="load-a-heave-module-asynchronously">Load a Heave Module Asynchronously</h3>

<h3 id="code-splitting-in-vue-react--frameworks">Code Splitting in Vue, React, &amp; Frameworks</h3>

<h3 id="code-splitting-named-exports">Code Splitting Named Exports</h3>

<h3 id="vendor-bundles-are-an-anti-pattern">Vendor Bundles are an Anti Pattern</h3>

<h3 id="dynamic-code-splitting">Dynamic Code Splitting</h3>

<h3 id="dynamic-code-splitting-walkthrough">Dynamic Code Splitting Walkthrough</h3>

<h2 id="module-methods--magic-comments">Module Methods &amp; Magic Comments</h2>

<h3 id="introducing-magic-comments">Introducing Magic Comments</h3>

<h3 id="webpack-modes">Webpack Modes</h3>

<h3 id="webpack-prefetch--preload">Webpack Prefetch &amp; Preload</h3>

<h3 id="wrapping-up-code-splitting">Wrapping Up Code Splitting</h3>

<h3 id="webpack-config-organization">Webpack Config Organization</h3>

<h3 id="building-your-library-with-webpack">Building Your Library with Webpack</h3>

</div>
    </main>

    

    


  
<footer class="usa-footer usa-footer-medium" role="contentinfo">

  

  
    <div class="usa-grid usa-footer-return-to-top">
      <a href="#">Return to top</a>
    </div>
  



  

  
  <div class="usa-footer-secondary_section">
    <div class="usa-grid">
      <div class="usa-footer-logo">
        
          
            <img class="usa-footer-logo-img" src="/assets/img/hztl-wm.svg" alt="HZTL-WM">
            
          
        

        
        <p>William has consumed <span class="la-croix"></span> cans of <a href="/la-croix.html"><span class="la-croix-logo"></span></a> since his start date at Horizontal.<br/><em class="lighten-up"> * cans of delicious, bubbly, essenced water consumed accurate by ±50%</em></p>
        
        
      </div>

      
      <div class="usa-footer-contact-links usa-width-one-half">
        
        
        
          
      
      
      </div>
    </div>
  </div>
  

</footer>





    





  
<script src="/assets/uswds/js/uswds.min.js" async></script>





    <script src="/assets/js/la-croix.js"></script>
    <script src="/assets/js/scroll-watch.js"></script>

  </body>
</html>
