<!DOCTYPE html>
<html lang="en-US">
  <head><meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>Complete Intro to React, v5 ‚Ä¢ Wizard Unicorn Ninja</title><meta name="description" content="These are notes from the 'Complete Intro to React, v5' course on Frontend Masters."><link rel="shortcut icon" type="image/ico"href=""><link rel="icon" type="image/png"href="/assets/uswds/img/favicons/favicon.png"><link rel="icon" type="image/png"sizes="192x192"href="/assets/uswds/img/favicons/favicon-192.png"><link rel="apple-touch-icon-precomposed" type=""href="/assets/uswds/img/favicons/favicon-57.png"><link rel="apple-touch-icon-precomposed" type=""sizes="72x72"href="/assets/uswds/img/favicons/favicon-72.png"><link rel="apple-touch-icon-precomposed" type=""sizes="114x114"href="/assets/uswds/img/favicons/favicon-114.png"><link rel="apple-touch-icon-precomposed" type=""sizes="144x144"href="/assets/uswds/img/favicons/favicon-144.png"><link rel="stylesheet"
  href="/assets/css/main.css"
  media="screen"><!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-183755378-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', 'UA-183755378-1', { 'anonymize_ip': true, 'forceSSL': true });
</script></head>
  <body class=" "><a class="usa-skipnav" href="#main-content">Skip to main content</a>
<header class="usa-header usa-header-extended" role="banner" id="usa-header"><div class="usa-navbar">
      <button class="usa-menu-btn">Menu</button>
      <div class="usa-logo" id="extended-mega-logo">
        <a href="/" title="Wizard Unicorn Ninja"><img class="usa-logo-img" src="/assets/img/hztl-wm.svg" alt="Wizard Unicorn Ninja Logo"><em class="usa-logo-text">
            Wizard Unicorn Ninja
          </em>
        </a>
      </div>
    </div>

    <nav role="navigation" class="usa-nav">
      <div class="usa-nav-inner">
        <button class="usa-nav-close">
          <img src="/assets/uswds/img/close.svg" alt="close">
        </button><ul class="usa-nav-primary usa-accordion"><li><a class="usa-nav-link" href="/resources/" title="Resources" alt="Resources">
                <span>Resources</span>
              </a></li><li><a class="usa-nav-link" href="/frontend-masters/" title="Frontend Masters Workshop Notes" alt="Frontend Masters Workshop Notes">
                <span>Frontend Masters Workshop Notes</span>
              </a></li><li><button class="usa-accordion-button usa-nav-link" aria-expanded="false" aria-controls="nav-3" alt="Sitecore Workshop Notes" title="Sitecore Workshop Notes">
              <span>Sitecore Workshop Notes</span>
            </button><ul id="nav-3" class="usa-nav-submenu" aria-hidden="true"><li>
                  <a href="/sitecore/jss" title="Sitecore JSS Fundamentals" alt="Sitecore JSS Fundamentals">Sitecore JSS Fundamentals</a>
                </li></ul></li></ul><div class="usa-nav-secondary"><ul class="usa-unstyled-list usa-nav-secondary-links"><li>
                  <a href="">
                    
                  </a>
                </li></ul>
          </div></div>
      </div>
    </nav><div class="main-top">
      <div class="progress-container">
        <div class="progress-bar" id="progress"></div>
      </div>
    </div>
  </header>
  <div class="usa-overlay"></div><main id="main-content"class="usa-grid usa-section usa-content usa-layout-docs">
          <div class="usa-layout-docs-main_content"><h1>Complete Intro to React, v5</h1><p><a href="https://github.com/btholt/complete-intro-to-react-v5">Link to Course Github Repository</a></p>

<p><a href="https://bit.ly/react-v5">Link to Course Notes</a></p>

<p><a href="/frontend-masters/complete-intro-react/index.html">Link to Completed Workshop Project</a></p>

<h2 id="introduction">Introduction</h2>

<h3 id="introduction-1">Introduction</h3>

<p>This course covers the entirety of how to write (with?) React. Going over all of React‚Äôs features, hooks, context, and portals. This course also covers some of the other (React) APIs such as classes and life cycles. It is not required that you‚Äôve taken previous versions of this course, it is V5 as in this is its fifth iteration. But JK‚Ä¶ V3 is useful if you need to look at Webpack or React Router. This course is meant to be mostly modular, you can skip from lesson to lesson if you want, but the way that you have to do that is moving between git commits, because each section of this course is equal to a commit in the course repo.</p>

<p>It is recommended to get Sourcetree, which I already use for work, because it provides you with a visual commit history that you can right click on to check out a specific commit üî•. In the same repo for this course are the branches for the intermediate course, which is also available on Frontend Masters. If you prefer to use the command line for git, you can do that as well. If you find any issues with any of the course materials, you are invited to open a pull request (PR) <a href="https://github.com/btholt/complete-intro-to-react-v5/tree/gh-pages-src">on this branch</a> or <a href="https://github.com/btholt/complete-intro-to-react-v5/issues">file an issue</a> in the repo.</p>

<p>Blah blah blah, background information about how awesome the instructor Brian Holt is.</p>

<p>This course is open source, so share the links above to everyone in existence. Also, don‚Äôt just take, share your ‚ù§Ô∏è by giving the repo for this course a ‚≠êÔ∏è. Doing so will help further the course‚Äôs reach and Brian will feel even more awesome.</p>

<h3 id="project-setup">Project Setup</h3>

<p>When Brian first see React, he do not like it. HTML in JavaScript? Disgusting. Why would anyone ever want to have an additional transpiled language? Fear not, (go see your therapist if you are having feelings about it) we start with no weirdness, we start with</p>

<p>üñ§üñ§üñ§ <strong>RAW JAVASCRIPT REACT!</strong> üñ§üñ§üñ§</p>

<p>JSX and React are not doing any sort of black magic, its just JavaScript function calls. It is good to understand your tooling, otherwise you will resent them and be right back at your therapist. So, understand the problems that your tools are solving and embrace their complexity because it will give you ease of use.</p>

<p>Brian admittedly resented JSX because he did not understand it, it doesn‚Äôt have to be this way for you. Lets learn what it does and why it exists, because writing React in raw JavaScript React is annoying. Finally actually getting started, make a new folder in your preferred location to make new folders. Brian prefers to make folders of the same name in his Desktop directory, try to choose a name that isn‚Äôt already taken or <a href="http://sph.mn/dynamic/svn">use this name generator</a> (I just picked the first one that came up in a <del>Google</del> search) if you are having trouble (Brian chose ‚Äòadopt-me‚Äô). Oh wait, we are actually building a pet adoption app, so‚Ä¶ Now open your empty folder in VSCode or whatever editor you use.</p>

<p>In your code editor, create a new folder in your project folder, here the name is important, call it <code class="language-plaintext highlighter-rouge">src</code>. JK, it is not required to name it <code class="language-plaintext highlighter-rouge">src</code>, but Brian said to do it anyway. In the <code class="language-plaintext highlighter-rouge">src</code> folder, create a new file <code class="language-plaintext highlighter-rouge">index.html</code>. In the <code class="language-plaintext highlighter-rouge">index.html</code> file, start typing <code class="language-plaintext highlighter-rouge">html:5</code> and our digital friend Emmet will offer some help, accept Emmet‚Äôs help by pressing the ‚Äòtab‚Äô key on your keyboard. Emmet will ‚Äòscaffold‚Äô an HTML page for you. This is better than remembering what is supposed to go in an HTML file, but in case you‚Äôre wondering what Emmet builds for you, it should look like this:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Document<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<p>You can see the entire Emmet cheatsheet at <a href="https://emmet.io">emmet.io</a>. And Emmet is not just for VS Code, you can use Emmet with Sublime and maybe other editors as well. Update the <code class="language-plaintext highlighter-rouge">&lt;title&gt;</code> of your page to ‚ÄòAdopt Me!‚Äô (or whatever you like). Inside the <code class="language-plaintext highlighter-rouge">&lt;body&gt;</code> of you page, add:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>not rendered<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://unpkg.com/react@16.8.4/umd/react.development.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://unpkg.com/react-dom@16.8.4/umd/react-dom.development.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
    <span class="c1">// your code will go here, for now</span>
<span class="nt">&lt;/script&gt;</span></code></pre></figure>

<p>BTW Emmet is a very powerful tool, but Brian mostly uses the lazy abbreviations; to make the <code class="language-plaintext highlighter-rouge">&lt;div&gt;</code> with the ‚Äòroot‚Äô id, just type <code class="language-plaintext highlighter-rouge">#root</code> and hit tab, Emmet will do the rest. The ‚Äònot rendered‚Äô text in the root div is there to let you know if there is an issue with React, because if everything is working as expected, the contents of that div should be replaced. The first script tag is grabbing React from unpkg‚Äôs CDN so you can have access to React as a top-level variable, AKA you can use React. The second script tag grabs React DOM which allows you to render React to the browser. But why are there two packages? Because React Native and React DOM both share the React package.</p>

<p>And the final script tag is an example of something that you should never do, write JavaScript directly inside of your HTML, but Brian wants you to do this so that you can see how bare-bones you can implement React. Open the index.html file in your favorite browser. You should see ‚Äònot rendered‚Äô appear. Cool. If you check the console in the browser and type <code class="language-plaintext highlighter-rouge">React</code> or <code class="language-plaintext highlighter-rouge">ReactDOM</code> you will be able to see the objects that were received from the files that were downloaded from the CDN.</p>

<p>Surprisingly, this course is not about CSS, so there is a pre-made CSS file for you to use for this workshop, you can <a href="https://raw.githubusercontent.com/btholt/complete-intro-to-react-v5/master/src/style.css">grab the CSS file here</a>. Save that CSS file in your <code class="language-plaintext highlighter-rouge">src</code> folder (the easiest way being to hit ‚åò+A to select all, ‚åò+C to copy it, make a <code class="language-plaintext highlighter-rouge">style.css</code> file in your <code class="language-plaintext highlighter-rouge">src</code> folder, then ‚åò+V to paste the copied CSS into the <code class="language-plaintext highlighter-rouge">styles.css</code> file). Now add it to the <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code> of your <code class="language-plaintext highlighter-rouge">index.html</code> file:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"style.css"</span><span class="nt">&gt;</span></code></pre></figure>

<p>If you reload the <code class="language-plaintext highlighter-rouge">index.html</code> file in your browser, you will see the CSS has made your page look pretty!</p>

<h3 id="a-note-on-the-course-font">A Note on the Course Font</h3>

<p>Time to put some code in those empty script tags! Write the following:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script&gt;</span>
    <span class="c1">// your code will go here, for now</span>
    <span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            
    <span class="p">}</span>
<span class="nt">&lt;/script&gt;</span></code></pre></figure>

<p>If you were watching this course, Brian goes on a tangent about font ligatures.</p>

<blockquote>
  <p><em>‚ÄúIt‚Äôs pretty, that‚Äôs why I do it‚Äù</em></p>
</blockquote>

<p>There may also be an argument for reducing cognitive overhead, because ligatures combine character pairs, making them into one character instead of two‚Ä¶ Anyway, Brian is using the font called ‚ÄòDank Mono‚Äô. He did not name it. Before we continue, head off to <del><a href="https://dank.sh">dank.sh</a></del> <a href="https://gumroad.com/l/dank-mono">gumroad?</a> and buy their ‚ÄòDank Mono‚Äô font. It will only set you back ~$50, but the upside is you get an awesome font and Brian gets a nice little kickback (even though he insists he does not). If you don‚Äôt want to shell out ~$50, you can get a free font that has ligatures, <a href="https://github.com/tonsky/FiraCode">FiraCode</a>. Then Brian shows you how to install and use your fancy new font and what happens if you disable ligatures. ü§Ø</p>

<h2 id="pure-react">Pure React</h2>

<h3 id="getting-started-with-pure-react">Getting Started with Pure React</h3>

<p>Ok, for real this time, put this into the inline <code class="language-plaintext highlighter-rouge">&lt;script&gt;</code> tag in your <code class="language-plaintext highlighter-rouge">index.html</code> file:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script&gt;</span>
    <span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span>
            <span class="dl">"</span><span class="s2">div</span><span class="dl">"</span><span class="p">,</span>
            <span class="p">{},</span>
            <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">h1</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="dl">"</span><span class="s2">Adopt Me!</span><span class="dl">"</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">};</span>
<span class="nt">&lt;/script&gt;</span></code></pre></figure>

<p>What we‚Äôve done is create a component called ‚ÄòApp‚Äô. In this case, the component is just returning a function, in this case the result of <code class="language-plaintext highlighter-rouge">React.createElement</code>. But what is <code class="language-plaintext highlighter-rouge">createElement</code>? What is <code class="language-plaintext highlighter-rouge">App</code>? Think of <code class="language-plaintext highlighter-rouge">App</code> as if it were a rubber stamp. If used, our ‚Äòrubber stamp‚Äô can make many impressions of the design that is carved on it, if not used, it is just a rubber stamp. So far, all we have done is create the ‚Äòrubber stamp‚Äô. <code class="language-plaintext highlighter-rouge">.createElement</code> is like stamping something; i.e. anytime <code class="language-plaintext highlighter-rouge">App</code> gets called, <code class="language-plaintext highlighter-rouge">.createElement</code> is going to ‚Äòstamp<code class="language-plaintext highlighter-rouge"> a </code>&lt;div&gt;<code class="language-plaintext highlighter-rouge"> and inside of that </code>.createElement<code class="language-plaintext highlighter-rouge"> is going to 'stamp</code> an <code class="language-plaintext highlighter-rouge">&lt;h1&gt;</code>. And that is the basis of everything in React, it is just returning markup. So now that we have <code class="language-plaintext highlighter-rouge">App</code>, we need to actually use it somewhere. So add this to the bottom of your script tag:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script&gt;</span>
    <span class="c1">//...</span>
    <span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">App</span><span class="p">),</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">root</span><span class="dl">"</span><span class="p">));</span>
<span class="nt">&lt;/script&gt;</span></code></pre></figure>

<p>The new line we‚Äôve just added will actually ‚Äòstamp‚Äô our <code class="language-plaintext highlighter-rouge">App</code> into the DOM. <code class="language-plaintext highlighter-rouge">React.createElement</code> can either take in a component, as we‚Äôve seen with the last thing added to the <code class="language-plaintext highlighter-rouge">&lt;script&gt;</code> tag, or it can take a series of arguments to output to the DOM, as was the case with the first part of the <code class="language-plaintext highlighter-rouge">&lt;script&gt;</code> tag at the beginning of this section. If you now check your <code class="language-plaintext highlighter-rouge">index.html</code> file in your browser, you will see a fancy logo. Don‚Äôt be too confused by how fancy the <code class="language-plaintext highlighter-rouge">&lt;h1&gt;</code> is, the CSS file wee downloaded earlier is doing some magic to replace the original text with a logo.</p>

<p>Brian declares this workshop is over and walks off camera. JKLOL.</p>

<p>At its simplest, this is really what React is; taking a component and using it. The power here is that you can make components that you put inside of components that you put inside of components that you put inside of components. React gives you a composability model.</p>

<h3 id="createelement-arguments">createElement Arguments</h3>

<p>Q: Why is there still a <code class="language-plaintext highlighter-rouge">&lt;div id="root"&gt;</code> in the markup and why does it no longer appear in the DOM?</p>

<p>A: Because React. You don‚Äôt need to have any content in the <code class="language-plaintext highlighter-rouge">&lt;div&gt;</code>, but I (Brian) do it so that I know my JavaScript is loading.</p>

<p>Q: In <code class="language-plaintext highlighter-rouge">App</code>, you have a return statement for <code class="language-plaintext highlighter-rouge">React.createElement</code>, but then you pass <em>another</em> <code class="language-plaintext highlighter-rouge">React.createElement</code> inside of that?</p>

<p>A: <code class="language-plaintext highlighter-rouge">React.createElement</code> takes three parameters:</p>

<ol>
  <li>
    <p>What kind of tag is it; i.e. ‚Äúdiv‚Äù</p>
  </li>
  <li>
    <p>An object, which is currently an empty object. But, this could contain all of the attributes that you would like your component / DOM element that you are creating to have.</p>
  </li>
  <li>
    <p>The children. In our case, it is another element (an h1). You could pass in an array of elements, or not an array of elements, but imagine it as an array of elements because we will not continue writing React in this way.</p>
  </li>
</ol>

<h3 id="reusable-components">Reusable Components</h3>

<p>Writing this component inside of a script tag is absolutely disgusting, so lets not do that anymore. Make a new file in your <code class="language-plaintext highlighter-rouge">src</code> directory and name it <code class="language-plaintext highlighter-rouge">App.js</code>. React is extremely flexible, it‚Äôs not very prescriptive at all about pretty much anything. This is nice because it allows you to make technical decisions for yourself. Grab all the things from within your script tag and put it into the <code class="language-plaintext highlighter-rouge">App.js</code> file. Back in <code class="language-plaintext highlighter-rouge">index.html</code> add <code class="language-plaintext highlighter-rouge">src="./App.js"</code> to your now empty script tag; i.e. <code class="language-plaintext highlighter-rouge">&lt;script src="./App.js"&gt;&lt;/script&gt;</code></p>

<p>Now we are going to create another component. Make this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">const</span> <span class="nx">Pet</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">div</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="p">[</span>
        <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">h1</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="dl">"</span><span class="s2">Theodore</span><span class="dl">"</span><span class="p">),</span>
        <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">h2</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="dl">"</span><span class="s2">Cat</span><span class="dl">"</span><span class="p">),</span>
        <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">h2</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="dl">"</span><span class="s2">Tuxedo</span><span class="dl">"</span><span class="p">),</span>
    <span class="p">]);</span>
<span class="p">};</span></code></pre></figure>

<p>You can change the text of each element to reflect your pets information or just make something up. We‚Äôve now created a new ‚Äòstamp‚Äô, now we need to use it. Add three instances of <code class="language-plaintext highlighter-rouge">React.createElement(Pet)</code> to the <code class="language-plaintext highlighter-rouge">App</code> component, like this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span>
        <span class="dl">"</span><span class="s2">div</span><span class="dl">"</span><span class="p">,</span>
        <span class="p">{},</span>
        <span class="p">[</span>
            <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">h1</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="dl">"</span><span class="s2">Adopt Me!</span><span class="dl">"</span><span class="p">),</span>
            <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">Pet</span><span class="p">),</span>
            <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">Pet</span><span class="p">),</span>
            <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">Pet</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>
<span class="p">};</span></code></pre></figure>

<p>Now, if you refresh the index.html page in your browser, you should see 3 instances of your <code class="language-plaintext highlighter-rouge">Pet</code> component! This highlights the reusability of components, but in this case, the component is not at all flexible. Apparently, not all cats have the same name or are the same color, so lets make it a more flexible component.</p>

<h3 id="passing-in-component-props">Passing in Component Props</h3>

<p>Let‚Äôs take another look at the <code class="language-plaintext highlighter-rouge">Pet</code> component and see if we can pass in some data to make it more flexible. Update all three instances where <code class="language-plaintext highlighter-rouge">Pet</code> is called in <code class="language-plaintext highlighter-rouge">App</code> to the following:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//..</span>
<span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">Pet</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Theodore</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">animal</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Cat</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">breed</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Tuxedo</span><span class="dl">"</span>
<span class="p">}),</span>
<span class="c1">//..</span></code></pre></figure>

<p>Update the last two instances of <code class="language-plaintext highlighter-rouge">Pet</code> to have unique attributes (name, animal, breed). Now you have new information being passed into the <code class="language-plaintext highlighter-rouge">Pet</code> component, but now it needs to be put to use. Update the <code class="language-plaintext highlighter-rouge">Pet</code> component as follows:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">const</span> <span class="nx">Pet</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">div</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="p">[</span>
        <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">h1</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">),</span>
        <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">h2</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">props</span><span class="p">.</span><span class="nx">animal</span><span class="p">),</span>
        <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">h2</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">props</span><span class="p">.</span><span class="nx">breed</span><span class="p">)</span>
    <span class="p">]);</span>
<span class="p">};</span></code></pre></figure>

<p>Now all of the unique animal information will be used by the <code class="language-plaintext highlighter-rouge">Pet</code> component when it is called from within the <code class="language-plaintext highlighter-rouge">App</code> component!</p>

<h3 id="destructuring-props">Destructuring Props</h3>

<p>Writing <code class="language-plaintext highlighter-rouge">props.</code> over and over is going to become cumbersome as the app grows, so lets destructure the props. Update the <code class="language-plaintext highlighter-rouge">Pet</code> component like so:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">const</span> <span class="nx">Pet</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">animal</span><span class="p">,</span> <span class="nx">breed</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">div</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="p">[</span>
        <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">h1</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">name</span><span class="p">),</span>
        <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">h2</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">animal</span><span class="p">),</span>
        <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">h2</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">breed</span><span class="p">)</span>
    <span class="p">]);</span>
<span class="p">};</span></code></pre></figure>

<p>This concludes the first section, which is in fact what most of React is. If you were watching the video for this on Frontend Masters and fell behind, which you should not because you can pause it, you can skip to the first commit in the courses GitHub repository and be all caught up. Next, we are going to get some tooling set up to make React much easier to write, because the way we‚Äôve done it so far is not the way. Don‚Äôt worry, Brian knows the way. This introduction was to introduce the core concepts of what React is to you, the reader!</p>

<h2 id="tools">Tools</h2>

<h3 id="npm--generating-a-packagejson-file">npm &amp; Generating a package.json File</h3>

<p>So far, we‚Äôve been just straight up writing React. No one actually uses React like that, there is always some tool involved. Brian comes from front end infrastructure, so he is going to subject you to his madness, which is that you also need to understand the tools just like you understand the framework. Brian claims that he will keep it as <em>light</em> as possible and will give you his opinion about some of the better ways to write React.</p>

<p>The first tool we are going to look at is npm, which does not stand for Node Package Manager, but kind of does stand for Node Package Manager. npm will allow us to install node from the registry instead of grabbing it from a CDN, which is nice because we can then include it in our package instead of having to rely on whether or not unpkg is ‚Äòup‚Äô. unpkg is good for testing things out, but not reliable for production. So‚Ä¶ open up your terminal, if you are using VS Code, you can press ‚Äòcontrol+`‚Äô to open it. First thing, in the terminal, check if you have node installed by typing ‚Äònode -v‚Äô. If you do not, <a href="https://nodejs.org/en/">check out these instructions for how to install node</a>. As long as you have node 8 or greater, you should be fine to continue, if you do not‚Ä¶</p>

<p>Node comes with npm. Once you have node and npm, (still in the terminal) go into the root of your project directory and type <code class="language-plaintext highlighter-rouge">npm init</code> which will ‚Äòinitiate‚Äô a new project for you. If you are lazy like Brian, instead of <code class="language-plaintext highlighter-rouge">npm init</code>, type <code class="language-plaintext highlighter-rouge">npm init -y</code> and you can skip over all of the questions that you would have been asked (otherwise there would have been an interactive prompt asking a bunch of questions about your project). You will now find a new file in your project directory, <code class="language-plaintext highlighter-rouge">package.json</code>.</p>

<p>Inside of the <code class="language-plaintext highlighter-rouge">package.json</code> file, you can find details about your project, but Brian doesn‚Äôt care about what‚Äôs in the file and he doesn‚Äôt care if you care either. But any project dependencies will be tracked in the  <code class="language-plaintext highlighter-rouge">package.json</code> file, so anytime Brian says <code class="language-plaintext highlighter-rouge">npm install...</code>, a new dependency will be tracked in the <code class="language-plaintext highlighter-rouge">package.json</code> file.</p>

<h3 id="prettier">Prettier</h3>

<p>The next tool we are going to look at, as you may have guessed by the title of this section, is ‚ÄòPrettier‚Äô. It will help us maintain ‚Äòhigh-quality‚Äô code. In the terminal (it should still be open and in the root directory of your project, if not, make it‚Ä¶) type <code class="language-plaintext highlighter-rouge">npm i -D prettier</code> ( <code class="language-plaintext highlighter-rouge">i</code> is shorthand for ‚Äòinstall‚Äô and <code class="language-plaintext highlighter-rouge">-D</code> is for Developer, which means that this [prettier] will not ‚Äòship‚Äô with your production app ). If you check the <code class="language-plaintext highlighter-rouge">package.json</code> file again, you will see prettier listed in the ‚ÄòdevDependencies‚Äô. At the time when this course was filmed, prettier 1.17.0 installed for Brian, and at the time these notes were written, prettier 2.2.1 installed, you, human from the future may get a newer version.</p>

<p>Prettier will help you to format the code of your project in a consistent manner. Prettier will remove the need to discuss tabs vs spaces, trailing commas, and all the nitpicky things that developers like Brian spend time talking about. Prettier aims to cease conversation about these trivial matters, get everyone on the same page, and unify the format(ting) of your code. Brian actually does not care what his code looks like as long as it is well formatted. Be like Brian.</p>

<p>Prettier, similar to the Dank Mono font that gives Brian monetary kickbacks, reduces cognitive load because you don‚Äôt need to think about formatting your code, Prettier does it for you. Use it.</p>

<h3 id="npm-scripts">npm Scripts</h3>

<p>Inside of the <code class="language-plaintext highlighter-rouge">package.json</code> file, there is a ‚Äòscripts‚Äô section, initially with only a ‚Äòtest‚Äô script. This section of the <code class="language-plaintext highlighter-rouge">package.json</code> file allows you to add ‚Äòscripts‚Äô to run your project. You can define new scripts by following the format of the ‚Äòtest‚Äô script that is in that file, i.e. <code class="language-plaintext highlighter-rouge">"name": "do something"</code> (don‚Äôt forget to add a comma at the end of the line unless it is the last one‚Ä¶). Make a new script to use prettier to format your code:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prettier </span><span class="se">\"</span><span class="s2">src/**/*.{js,html}</span><span class="se">\"</span><span class="s2"> --write"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"test"</span><span class="err">...</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>The ‚Äòformat‚Äô script from above will run prettier on any .js or .html file in any directory. This is a nice way to force team members to use your workflow.</p>

<h3 id="prettier-setup">Prettier Setup</h3>

<p>Brian doesn‚Äôt use Prettier in the above way, but as a VS Code extension which runs every time you hit save (Pro tip: make VS Code autosave). Install the ‚ÄòPrettier - Code formatter‚Äô extension (if you are using VS Code). Once installed, go to your ‚ÄòSettings‚Äô and search for ‚Äòformat on save‚Äô, check the box ‚ÄòEditor: Format On Save‚Äô, then search for ‚Äòrequire config‚Äô and check the box under ‚ÄòPrettier: Require Config‚Äô. The ‚Äòrequire config‚Äô will make Prettier run only on projects that it is installed on (which is a good thing because we don‚Äôt want Prettier to run on projects that it is not installed on so that it does not format all the code in a project that is not using it which would result in probably every file being changed which would be bad when you commit something and every file has changed when you maybe only worked in one file and then you will git blamed and that is not fun).</p>

<p>Now, the project currently has no configuration file for Prettier, so one should be made. In the root directory of your project, make a new file <code class="language-plaintext highlighter-rouge">.prettierrc</code>. Brian had no idea what the ‚Äòrc‚Äô at the end of the file name stands for, but a quick search looks like it stands for ‚Äòrun commands‚Äô, ‚Äòresource control‚Äô, ‚Äòrun control‚Äô, or ‚Äòruntime configuration‚Äô (<a href="https://stackoverflow.com/questions/11030552/what-does-rc-mean-in-dot-files">see this stack overflow post for the deets</a>). In your <code class="language-plaintext highlighter-rouge">.prettierrc</code> file, add an empty object <code class="language-plaintext highlighter-rouge">{}</code>. There are some things that you can configure, but Brian doesn‚Äôt care, he just wants it to work. The empty object will just give you the default configuration for prettier. <a href="https://prettier.io/docs/en/configuration.html">Here‚Äôs the Prettier configuration documentation</a></p>

<p>If you go back to one of your .js or .html files and ruin a bunch of formatting, then save the file, Prettier should fix the formatting for you.</p>

<h3 id="eslint-setup">ESLint Setup</h3>

<p>Back in the terminal (yes, still in the root directory of your project) type <code class="language-plaintext highlighter-rouge">npm i -D eslint eslint-config-prettier</code>. This will install 2 things, ESLint, which is a code linter*, and the prettier config for ESLint which will let ESLint ignore the mechanical formatting things that Prettier does.</p>

<p>To verify that the 2 packages have installed, check the <code class="language-plaintext highlighter-rouge">package.json</code> file.</p>

<p>In the projects root directory, make a <code class="language-plaintext highlighter-rouge">.eslintrc.json</code> file.</p>

<p>Q: Why is there a <code class="language-plaintext highlighter-rouge">package-lock.json</code> file in my project folder?</p>

<p>A: The <code class="language-plaintext highlighter-rouge">package-lock.json</code> file ‚Äòlocks‚Äô the versions of the dependencies for your project so that what you run locally is the same as what you run in production.</p>

<p>* Code linters are concerned with code style as opposed to code formatting (prettier). Style includes; methods, accessibility, syntax, etc.</p>

<h3 id="eslint-configuration">ESLint Configuration</h3>

<p>In the <code class="language-plaintext highlighter-rouge">.eslintrc.json</code> file, add the following:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nl">"extends"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"eslint:recommended"</span><span class="p">,</span><span class="w"> </span><span class="s2">"prettier"</span><span class="p">,</span><span class="w"> </span><span class="s2">"prettier/react"</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="nl">"plugins"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"parserOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"ecmaVersion"</span><span class="p">:</span><span class="w"> </span><span class="mi">2018</span><span class="p">,</span><span class="w">
        </span><span class="nl">"sourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"module"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ecmaFeatures"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"jsx"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"es6"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"browser"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"node"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>In the above, ‚Äòextends‚Äô is how you can extend the configuration of ESLint. ‚Äòeslint:recommended‚Äô is the bare-minimum set of recommended rules for ESLint, which Brian thinks everyone should be running all the time <strong>and</strong> he does not believe it to be a controversial opinion. Ok Brian. There are alternatives to ‚Äòrecommended‚Äô, i.e. standard or airbnb, which are much more opinionated. ‚Äòrecommended‚Äô will catch bugs, but won‚Äôt force you to write code in a specific way, which is a kind way to make sure that there are some standards in place without being overbearing. Then ‚Äòprettier‚Äô and ‚Äòprettier/react‚Äô tells ESLint to use prettier‚Ä¶</p>

<p>‚Äòplugins‚Äô is set but undefined for now, we will add to it later. The ‚ÄòparserOptions‚Äô object sets the latest supported version of ecma, 2018 (which includes support for async/await), the ‚ÄòsourceType‚Äô to module (because we are using import and export, i.e. ES Modules), and ‚ÄòecmaFeatures‚Äô ‚Äòjsx‚Äô to true (so that ESLint understands the jsx we are about to be writing).</p>

<p>Finally, the ‚Äòenv‚Äô object is telling ESLint to allow ES6 syntax, ‚Äòbrowser‚Äô tells ESLint that <code class="language-plaintext highlighter-rouge">setTimeout</code>, <code class="language-plaintext highlighter-rouge">window, etc... are ok to use, and 'node' we will write later, so we don't want ESLint to choke on </code>http<code class="language-plaintext highlighter-rouge"> and </code>require`.</p>

<p>The above ESLint configuration is Brian‚Äôs base configuration, he likes it.</p>

<p>Now, open up your <code class="language-plaintext highlighter-rouge">package.json</code> file and add the following to your scripts:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="err">//..</span><span class="w">
</span><span class="nl">"lint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eslint </span><span class="se">\"</span><span class="s2">src/**/*.{js,jsx}</span><span class="se">\"</span><span class="s2"> --quiet"</span><span class="err">,</span><span class="w">
</span><span class="err">//..</span></code></pre></figure>

<p>The above will lint any files with the <code class="language-plaintext highlighter-rouge">.js</code> or <code class="language-plaintext highlighter-rouge">.jsx</code> extensions and <code class="language-plaintext highlighter-rouge">--quiet</code> will make ESLint‚Ä¶ quiet. Right now if you were to run the <code class="language-plaintext highlighter-rouge">lint</code> script <code class="language-plaintext highlighter-rouge">npm run lint</code>, you would see a bunch of <code class="language-plaintext highlighter-rouge">error 'React' is not defined</code>, which is what is expected because ESLint does not know what React is, yet. Those errors will be fixed soon. Brian does not run the <code class="language-plaintext highlighter-rouge">lint</code> command often, but he does use the ESLint VS Code extension. If you install the ESLint VS Code extension, you will see the ESLint errors inside of your editor without having to run the <code class="language-plaintext highlighter-rouge">lint</code> script we just made for our project.</p>

<p>Brian then goes on to explain how awesome and useful ESLint is. Use it. Additionally, ESLint is very extendible, you (and Brian) can write custom ESLint rules. There are other tools out there that can lint your code; JSHint and JSLint were mentioned.</p>

<h3 id="gitignore">gitignore</h3>

<p>In your projects root directory, create a <code class="language-plaintext highlighter-rouge">.gitignore</code> file. The purpose of the <code class="language-plaintext highlighter-rouge">.gitignore</code> file is to let git know what files you would like to exclude from your project repository. Add the following to the <code class="language-plaintext highlighter-rouge">.gitignore</code> file:</p>

<figure class="highlight"><pre><code class="language-markdown" data-lang="markdown">node_modules/
.DS_Store
.cache/
dist/
coverage/
.vscode/
.env</code></pre></figure>

<h3 id="parcel">Parcel</h3>

<p>In a previous iteration of this workshop, Brian taught React v3 with Webpack. Webpack is cool, but he is now using Parcel because it is hands off, i.e. easier to use which makes it simpler for the purposes of this workshop. We will simply point Parcel at a file and there is no additional configuration required. With power comes complexity, so we (Brian) leave(s) Webpack out of this workshop now. In your terminal, type the following: <code class="language-plaintext highlighter-rouge">npm i -D parcel-bundler</code>.</p>

<p>It may take a while to install. Parcel, when installed, is super simple, just point it at your index.html file and it will do the rest. Once Parcel is installed, jump back to your <code class="language-plaintext highlighter-rouge">package.json</code> file and add another script:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="err">//...</span><span class="w">
</span><span class="nl">"dev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"parcel src/index.html"</span><span class="err">,</span><span class="w">
</span><span class="err">//...</span></code></pre></figure>

<p>If you run your new script, <code class="language-plaintext highlighter-rouge">npm run dev</code>, you will see that there is now a <code class="language-plaintext highlighter-rouge">.cache</code> and a <code class="language-plaintext highlighter-rouge">dist</code> directory. Those directories can be ignored for now and you should also see in the terminal that your app is being served at a local host address. Click it and open the browser to see your app being served by Parcel! Now, whenever you make changes to your files, Parcel will run and update your page.</p>

<h3 id="installing-react--reactdom">Installing React &amp; ReactDom</h3>

<p>Time to fix the ESLint <code class="language-plaintext highlighter-rouge">error 'React' is not defined</code> errors. In the terminal, stop the Parcel server by hitting <code class="language-plaintext highlighter-rouge">control+c</code>, then type <code class="language-plaintext highlighter-rouge">npm i react react-dom</code> which will install the 2 packages that we have been using from unpkg from the npm registry. In your projects <code class="language-plaintext highlighter-rouge">index.html</code> file, delete the following lines:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://unpkg.com/react@16.8.4/umd/react.development.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://unpkg.com/react-dom@16.8.4/umd/react-dom.development.js"</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre></figure>

<p>In the <code class="language-plaintext highlighter-rouge">App.js</code> file, add:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">render</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-dom</span><span class="dl">'</span><span class="p">;</span></code></pre></figure>

<p>The above will import the default export from the React package and ‚Äòrender‚Äô from the React DOM package. Now at the bottom of the <code class="language-plaintext highlighter-rouge">App.js</code> file, delete <code class="language-plaintext highlighter-rouge">React.</code> from the last line. Brian encourages you to use the named exports, i.e. <code class="language-plaintext highlighter-rouge">import { render }...</code>, from packages you are using so that only the code you are using gets included. Run your dev script again, <code class="language-plaintext highlighter-rouge">npm run dev</code>, and you will find that your project still runs!</p>

<h3 id="separate-app-into-modules">Separate App into Modules</h3>

<p>Now that we have a bundler, we can start to separate our <code class="language-plaintext highlighter-rouge">App.js</code> file into modules! Brian has no idea why you would ever have more than one component per file, so we will fix that. If you are using VS Code, highlight the <code class="language-plaintext highlighter-rouge">Pet</code> component in <code class="language-plaintext highlighter-rouge">App.js</code> and you should see a little üí° appear. Click the üí° and select the ‚ÄòMove to a new file‚Äô option. VS Code will make a new file from the <code class="language-plaintext highlighter-rouge">Pet</code> component and add an import statement for it in <code class="language-plaintext highlighter-rouge">App.js</code>. It‚Äôs pretty magical, and you can thank TypeScript, which VS Code is constantly running against your code even though this project is not using it.</p>

<p>Update the import statement in <code class="language-plaintext highlighter-rouge">App.js</code> to:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">Pet</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./Pet</span><span class="dl">"</span><span class="p">;</span></code></pre></figure>

<p>And update <code class="language-plaintext highlighter-rouge">Pet.js</code> to:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">Pet</span><span class="p">({</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">animal</span><span class="p">,</span> <span class="nx">breed</span> <span class="p">})</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">div</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="p">[</span>
    <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">h1</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">name</span><span class="p">),</span>
    <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">h2</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">animal</span><span class="p">),</span>
    <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">h2</span><span class="dl">"</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">breed</span><span class="p">),</span>
  <span class="p">]);</span>
<span class="p">};</span></code></pre></figure>

<p>Brian makes the above edits because it is a pattern he follows and he also claims that it is a fairly common pattern, but says that you can do whatever you want YMMV. With the above changes, your app should still be working as it was, but these changes will make everything easier to maintain.</p>

<h2 id="jsx">JSX</h2>

<h3 id="converting-to-jsx">Converting to JSX</h3>

<p>So far, we‚Äôve been writing React without any transpilation, but now we will start to work with JSX. Because we are using Parcel, we can now use JSX. Parcel will do transformations to our code using a project called Babel. Writing React as we‚Äôve done so far has required us to think about what HTML we want then translate that to React / JavaScript. JSX will allow us to write something closer to HTML without having to think about how the HTML needs to be translated to React / JavaScript which will make our coding easier. Update <code class="language-plaintext highlighter-rouge">Pet.js</code> like so:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">Pet</span><span class="p">({</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">animal</span><span class="p">,</span> <span class="nx">breed</span> <span class="p">})</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">animal</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h2</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">breed</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h2</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>The above code, at transpilation, will actually become what it once was <code class="language-plaintext highlighter-rouge">React.createElement...</code>, but this [JSX] is arguably much easier to write.</p>

<h3 id="configuring-eslint-for-react">Configuring ESLint for React</h3>

<p>Now that we‚Äôve started using JSX, ESLint is upset because <code class="language-plaintext highlighter-rouge">React.createElement...</code> no longer appears in the <code class="language-plaintext highlighter-rouge">Pet.js</code> file, even though once our code is transpiled by Parcel / Babel it will in fact be using <code class="language-plaintext highlighter-rouge">React.createElement...</code>. Let‚Äôs fix this. Back in the terminal, in the root directory for your project, type: <code class="language-plaintext highlighter-rouge">npm install -D babel-eslint eslint-plugin-import eslint-plugin-jsx-a11y eslint-plugin-react</code> (if the Parcel server is still running, hit <code class="language-plaintext highlighter-rouge">control+c</code>). All of these tools will allow ESLint to correctly understand React.</p>

<p><code class="language-plaintext highlighter-rouge">babel-eslint</code> allows ESLint to be augmented by Babel, a transpiler.
<code class="language-plaintext highlighter-rouge">eslint-plugin-import</code> gives you some new rules around importing and exporting things, so you have some good habits‚Ä¶
<code class="language-plaintext highlighter-rouge">eslint-plugin-jsx-a11y</code> is a bunch of no-brainer things for accessibility, i.e. don‚Äôt make divs clickable, this will help you catch the easy accessibility things you should be doing.
<code class="language-plaintext highlighter-rouge">eslint-plugin-react</code> will help with some additional React rules that we need.</p>

<p>Once those things are installed, go to the <code class="language-plaintext highlighter-rouge">.eslintrc.json</code> file and update it so it looks like this:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nl">"extends"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"eslint:recommended"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plugin:import/errors"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plugin:react/recommended"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plugin:jsx-a11y/recommended"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prettier"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prettier/react"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"react/prop-types"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"no-console"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"plugins"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"react"</span><span class="p">,</span><span class="w"> </span><span class="s2">"import"</span><span class="p">,</span><span class="w"> </span><span class="s2">"jsx-a11y"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"parserOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"ecmaVersion"</span><span class="p">:</span><span class="w"> </span><span class="mi">2018</span><span class="p">,</span><span class="w">
        </span><span class="nl">"sourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"module"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ecmaFeatures"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"jsx"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"es6"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"browser"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"node"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"react"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"detect"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>The new ‚Äòextends‚Äô are sets of rules and the ‚Äòplugins‚Äô are new abilities for ESLint. The order of the ‚Äòextends‚Äô is not important, only that the two for prettier come at the end of the list. ‚Äòrules‚Äô set a couple of rules for things we want or not and ESLint requires information about the version of React you are using, so the ‚Äòsettings‚Äô object is needed, in which we are telling ESLint to figure out what version of React we are using by itself (ESLint will figure it out from the <code class="language-plaintext highlighter-rouge">package.json</code> file). This ESLint configuration is what Brian uses for basically all of his React projects. Now that the ESLint config has been updated, ESLint will no longer complain about React being imported when you are writing your code in JSX (not explicitly calling <code class="language-plaintext highlighter-rouge">React.</code>).</p>

<h3 id="jsx-composite-components--expressions">JSX Composite Components &amp; Expressions</h3>

<p>Now, let‚Äôs update <code class="language-plaintext highlighter-rouge">App.js</code> to also use JSX. Open <code class="language-plaintext highlighter-rouge">App.js</code> and make it look like this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">render</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-dom</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Pet</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./Pet</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Adopt</span> <span class="nx">Me</span><span class="o">!&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">Pet</span> <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">Theodore</span><span class="dl">"</span> <span class="nx">animal</span><span class="o">=</span><span class="dl">"</span><span class="s2">Cat</span><span class="dl">"</span> <span class="nx">breed</span><span class="o">=</span><span class="dl">"</span><span class="s2">Tuxedo</span><span class="dl">"</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="nx">Pet</span> <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">Kuma</span><span class="dl">"</span> <span class="nx">animal</span><span class="o">=</span><span class="dl">"</span><span class="s2">Dog</span><span class="dl">"</span> <span class="nx">breed</span><span class="o">=</span><span class="dl">"</span><span class="s2">Doberman</span><span class="dl">"</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="nx">Pet</span> <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">Salvador</span><span class="dl">"</span> <span class="nx">animal</span><span class="o">=</span><span class="dl">"</span><span class="s2">Cat</span><span class="dl">"</span> <span class="nx">breed</span><span class="o">=</span><span class="dl">"</span><span class="s2">Fake Russian Blue</span><span class="dl">"</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>

<span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">root</span><span class="dl">"</span><span class="p">));</span></code></pre></figure>

<p>In the above code, feel free to use whatever pet name, animal, and breed you like.</p>

<h2 id="hooks">Hooks</h2>

<h3 id="creating-a-search-component">Creating a Search Component</h3>

<p>According to 2019 Brian, hooks were considered a new feature to React. Guess I‚Äôm pretty late to the party üéâ. While hooks are optional to learn, Brian is going to learn us on em. Classes are also a need to know which we will get into later. If you are only here to learn hooks, <a href="https://btholt.github.io/complete-intro-to-react-v5/hooks-in-depth">check out this ‚ÄòHooks In Depth‚Äô section from the ‚ÄòIntermediate React, v2‚Äô course</a>. Make a new component (in the <code class="language-plaintext highlighter-rouge">src</code> directory), <code class="language-plaintext highlighter-rouge">SearchParams.js</code> . In the <code class="language-plaintext highlighter-rouge">SearchParams.js</code> file, add this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">SearchParams</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">location</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Seattle, WA</span><span class="dl">"</span><span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">search-params</span><span class="dl">"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">form</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">location</span><span class="dl">"</span><span class="o">&gt;</span>
          <span class="nx">Location</span>
          <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">location</span><span class="dl">"</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">location</span><span class="p">}</span> <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Location</span><span class="dl">"</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="sr">/label</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">button</span><span class="o">&gt;</span><span class="nx">Submit</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/form</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">SearchParams</span><span class="p">;</span></code></pre></figure>

<p>The API that we are going to be using is restricted (by Brian) to Seattle, WA and San Francisco, CA, so use one of those. You‚Äôll notice that instead of <code class="language-plaintext highlighter-rouge">class</code> in the <code class="language-plaintext highlighter-rouge">div</code>, we are using <code class="language-plaintext highlighter-rouge">className</code>. This is due to the fact that <code class="language-plaintext highlighter-rouge">class</code> is used in JavaScript, so we have to use the DOM API version for declaring a class(Name) in JSX (similarly, you couldn‚Äôt do something like <code class="language-plaintext highlighter-rouge">const let = "newLet";</code>, because <code class="language-plaintext highlighter-rouge">let</code> is a part of the JavaScript language and you cannot redeclare what it is). The rest of the markup should be familiar enough, the only real oddity being the <code class="language-plaintext highlighter-rouge">{location}</code>, which is grabbing the value that was assigned to the location variable in the above code.</p>

<p>Now that we‚Äôve made the <code class="language-plaintext highlighter-rouge">SearchParams</code> component, update <code class="language-plaintext highlighter-rouge">App.js</code> to use it, like this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">render</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-dom</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">SearchParams</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./SearchParams</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Adopt</span> <span class="nx">Me</span><span class="o">!&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">SearchParams</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>

<span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">root</span><span class="dl">"</span><span class="p">));</span></code></pre></figure>

<p>Check your page w/ the Parcel server, either open your browser if it‚Äôs already running or open terminal and type <code class="language-plaintext highlighter-rouge">npm run dev</code> then open [your browser] to see the changes.</p>

<h3 id="setting-state-with-hooks">Setting State with Hooks</h3>

<p>While checking out the awesome changes you‚Äôve made to your app, try to change the text in the input box. I‚Äôll wait. Couldn‚Äôt change it? Congrats, you‚Äôve broken the DOM. This was actually the same exact problem that many before you have run into when working with React, and the issue is, ‚Äúwhy has something that used to be so simple to implement now been made so hard?‚Äù. The issue is based in how React works, it goes something like this:</p>

<ul>
  <li>React hits <code class="language-plaintext highlighter-rouge">App.js</code> which renders whatever components are in it, in this case <code class="language-plaintext highlighter-rouge">App.js</code> and <code class="language-plaintext highlighter-rouge">SearchParams.js</code></li>
  <li>When you type even a single character into the <code class="language-plaintext highlighter-rouge">SearchParams.js</code> input field, a render is triggered</li>
  <li>React finds a <code class="language-plaintext highlighter-rouge">const location</code> and uses that value as it is assigned, to the input field</li>
</ul>

<p>Two-way data binding is not automatic in React. Brian makes the case for this being a benefit in React, the fact that it is more verbose. While you do have to type more to achieve what may seem to be more simple in another framework, such as Angular, the end result is that your code is more explicit and readable. To fix the issue with not being able to type anything into the input field for the <code class="language-plaintext highlighter-rouge">SearchParams.js</code> component, update the <code class="language-plaintext highlighter-rouge">SearchParams.js</code> component like this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">SearchParams</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">location</span><span class="p">,</span> <span class="nx">setLocation</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="dl">"</span><span class="s2">Seattle, WA</span><span class="dl">"</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">search-params</span><span class="dl">"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">form</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">location</span><span class="dl">"</span><span class="o">&gt;</span>
          <span class="nx">Location</span>
          <span class="o">&lt;</span><span class="nx">input</span>
            <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">location</span><span class="dl">"</span>
            <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">location</span><span class="p">}</span>
            <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Location</span><span class="dl">"</span>
            <span class="nx">onChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">setLocation</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span>
          <span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/label</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">button</span><span class="o">&gt;</span><span class="nx">Submit</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/form</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">SearchParams</span><span class="p">;</span></code></pre></figure>

<p>We‚Äôre importing <code class="language-plaintext highlighter-rouge">useState</code> from React, updating the <code class="language-plaintext highlighter-rouge">const location</code> variable, and adding an <code class="language-plaintext highlighter-rouge">onChange</code> event with a wee little function to the input element (which takes an e(vent) and updates the input with the event.target.value). Now whenever something is typed in the input field, the <code class="language-plaintext highlighter-rouge">onChange</code> is triggered, which will then call <code class="language-plaintext highlighter-rouge">setLocation</code> to update <code class="language-plaintext highlighter-rouge">location</code> with whatever is in the input field. Check your page to verify that the change works. Here‚Äôs how it works:</p>

<ul>
  <li>Typing in the input field triggers a re-render, <code class="language-plaintext highlighter-rouge">SearchParam</code> re-renders</li>
  <li><code class="language-plaintext highlighter-rouge">[location, setLocation]</code> location is the current state of location, setLocation is an ‚Äòupdater‚Äô for that piece of state</li>
  <li>Every time the <code class="language-plaintext highlighter-rouge">onChange</code> event happens, <code class="language-plaintext highlighter-rouge">e</code> will represent the event which then calls <code class="language-plaintext highlighter-rouge">setLocation</code> with the value of what was typed in the input field</li>
  <li>The state is updated and when another re-render occurs, the ‚Äòstate‚Äô of location will be whatever it has been updated to (‚ÄúSeattle, WA‚Äù is the default state of the input field)</li>
</ul>

<p>With that being said, you can see that there is going to be a fair amount of re-rendering happening with this component, so it is important to keep what you are updating fairly narrow in its scope, because your component function will be re-rendered (run again) whenever its state changes. This line is the hook:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//...</span>
<span class="kd">const</span> <span class="p">[</span><span class="nx">location</span><span class="p">,</span> <span class="nx">setLocation</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="dl">"</span><span class="s2">Seattle, WA</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">//...</span></code></pre></figure>

<p>The important thing to note about hooks is that they all begin with ‚Äòuse‚Äô. <code class="language-plaintext highlighter-rouge">useState</code>, <code class="language-plaintext highlighter-rouge">useEffect</code>, <code class="language-plaintext highlighter-rouge">useCallback</code>, <code class="language-plaintext highlighter-rouge">useMemo</code>, all hooks begin with ‚Äòuse‚Äô. Hooks is how you get ‚Äòstateful logic‚Äô with React.</p>

<p><a href="https://reactjs.org/docs/hooks-reference.html#usestate">check out the useState hook in the React docs</a></p>

<h3 id="best-practices-for-hooks">Best Practices for Hooks</h3>

<p>Hooks <strong>never</strong> go inside of <code class="language-plaintext highlighter-rouge">if</code> statements and they <strong>never</strong> go inside of <code class="language-plaintext highlighter-rouge">for</code> loops or anything like that. But why Brian? Basically, the way that hooks work is that they are keeping track of the order that you are creating hooks. So‚Ä¶ <strong>if</strong> you put a hook inside of an <code class="language-plaintext highlighter-rouge">if</code> statement, the first time the condition may be true, so your hook would work, but what if on the second run of the <code class="language-plaintext highlighter-rouge">if</code> statement, the condition is not true? Your hook would not work. Don‚Äôt do it. Brian will help us set up an ESLint rule to prevent us from being so dumb in a minute. BTW, this is also mentioned in the React docs and applies to all hooks, not just <code class="language-plaintext highlighter-rouge">useState</code>.</p>

<h3 id="configuring-eslint-for-hooks">Configuring ESLint for Hooks</h3>

<p>Open up your console and type <code class="language-plaintext highlighter-rouge">npm i -D eslint-plugin-react-hooks</code>. This will install the official (ESLint) rules from the React team about writing hooks. Open up the <code class="language-plaintext highlighter-rouge">.eslintrc.json</code> file and add the following:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">//...</span><span class="w">
    </span><span class="nl">"react-hooks/rules-of-hooks"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"react-hooks/exhaustive-depths"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
</span><span class="nl">"plugins"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"react"</span><span class="p">,</span><span class="w"> </span><span class="s2">"import"</span><span class="p">,</span><span class="w"> </span><span class="s2">"jsx-a11y"</span><span class="p">,</span><span class="w"> </span><span class="s2">"react-hooks"</span><span class="p">]</span><span class="err">,</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">"react-hooks/exhaustive-depths": 1</code> will <em>force</em> you to do something that has to do with effects, Brian will talk about it later. The numbers in the rules stand for:</p>

<p>0 - turn off
1 - warn
2 - throw error</p>

<h3 id="calling-the-pet-api">Calling the Pet API</h3>

<p>We need to install a new client library to make requests against an API. To do that, add the following line to the <code class="language-plaintext highlighter-rouge">SearchParams.js</code> file:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="p">{</span> <span class="nx">ANIMALS</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@frontendmasters/pet</span><span class="dl">'</span><span class="p">;</span></code></pre></figure>

<p>We‚Äôve not installed that library, but Parcel will do it for us! If you feel more comfortable installing that package through the terminal, run <code class="language-plaintext highlighter-rouge">npm i @frontendmasters/pet</code>.</p>

<p>Still in <code class="language-plaintext highlighter-rouge">SearchParams.js</code> declare another <code class="language-plaintext highlighter-rouge">const</code> below the one for location:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//...</span>
<span class="kd">const</span> <span class="p">[</span><span class="nx">animal</span><span class="p">,</span> <span class="nx">setAnimal</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="dl">"</span><span class="s2">dog</span><span class="dl">"</span><span class="p">);</span></code></pre></figure>

<p>AND add this JSX (just below the <code class="language-plaintext highlighter-rouge">&lt;/label&gt;</code> so we can use the const:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//...</span>
<span class="o">&lt;</span><span class="sr">/label</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">animal</span><span class="dl">"</span><span class="o">&gt;</span>
    <span class="nx">Animal</span>
    <span class="o">&lt;</span><span class="nx">select</span>
        <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">animal</span><span class="dl">"</span>
        <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">animal</span><span class="p">}</span>
        <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="nx">setAnimal</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span>
        <span class="nx">onBlur</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="nx">setAnimal</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">option</span><span class="o">&gt;</span><span class="nx">All</span><span class="o">&lt;</span><span class="sr">/option</span><span class="err">&gt;
</span>        <span class="p">{</span><span class="nx">ANIMALS</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">animal</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">animal</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">animal</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/option&gt;</span><span class="se">))</span><span class="err">}
</span>    <span class="o">&lt;</span><span class="sr">/select</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/label</span><span class="err">&gt;
</span><span class="c1">//...</span></code></pre></figure>

<p>That‚Äôs a bunch of things! Due to A11y, if the <code class="language-plaintext highlighter-rouge">onBlur</code> were not a part of our <code class="language-plaintext highlighter-rouge">&lt;select&gt;</code>, A11y would complain that the <code class="language-plaintext highlighter-rouge">&lt;select&gt;</code> would not be accessible. The <code class="language-plaintext highlighter-rouge">{ANIMALS.map(animal =&gt; (&lt;option value={animal}&gt;{animal}&lt;/option&gt;))}</code> will allow us to take the array of strings which comes from the API and convert them into an <code class="language-plaintext highlighter-rouge">&lt;option&gt;</code> for each element (string) that is in the array. If you check your browser, you should now see the new select menu with all the animal types, but there is an error‚Ä¶</p>

<h3 id="unique-list-item-keys">Unique List Item Keys</h3>

<p>The error that you may have seen is React complaining that it needs a <code class="language-plaintext highlighter-rouge">key</code>. The <code class="language-plaintext highlighter-rouge">key</code> is an identifier that React uses to determine if something already existed or not. If a thing did not previously exist or has changed, then a re-render should trigger, but if the thing already existed and/or didn‚Äôt actually change in any way, we don‚Äôt necessarily want to trigger a re-render and the provision of a <code class="language-plaintext highlighter-rouge">key</code> is how we can prevent that from unnecessarily happening. Add a key to the <code class="language-plaintext highlighter-rouge">{ANIMALS.map...}</code> like so:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//...</span>
    <span class="p">{</span><span class="nx">ANIMALS</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">animal</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">option</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">animal</span><span class="p">}</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">animal</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">animal</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/option&gt;</span><span class="se">))</span><span class="err">}
</span><span class="c1">//...</span></code></pre></figure>

<p>The <code class="language-plaintext highlighter-rouge">key</code> does need to be a unique identifier, in the case of the pet API, we know that the type of each animal is unique, so using <code class="language-plaintext highlighter-rouge">{animal}</code> will work.</p>

<p><a href="https://reactjs.org/docs/lists-and-keys.html">Read more about keys in the official React documentation</a></p>

<h3 id="breed-dropdown">Breed Dropdown</h3>

<p>Now we‚Äôre basically going to repeat what we just did, but for breeds. Add this below the <code class="language-plaintext highlighter-rouge">&lt;/label&gt;</code> that we just made:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//...</span>
<span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">breed</span><span class="dl">"</span><span class="o">&gt;</span>
    <span class="nx">Breed</span>
    <span class="o">&lt;</span><span class="nx">select</span> 
        <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">breed</span><span class="dl">"</span>
        <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">breed</span><span class="p">}</span>
        <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="nx">setBreed</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span>
        <span class="nx">onBlur</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="nx">setBreed</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span>
        <span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">breeds</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span>
        <span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">option</span><span class="o">&gt;</span><span class="nx">All</span><span class="o">&lt;</span><span class="sr">/option</span><span class="err">&gt;
</span>        <span class="p">{</span><span class="nx">breeds</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">breedString</span> <span class="o">=&gt;</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">breedString</span><span class="p">}</span> <span class="nx">value</span><span class="o">=</span><span class="dl">"</span><span class="s2">{breedString}</span><span class="dl">"</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">breedString</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/option</span><span class="err">&gt;
</span>            <span class="p">))}</span>
        <span class="o">&lt;</span><span class="sr">/select</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/label</span><span class="err">&gt;
</span><span class="c1">//...</span></code></pre></figure>

<p>And add these 2 <code class="language-plaintext highlighter-rouge">const</code> variables just after the others in <code class="language-plaintext highlighter-rouge">SearchParams.js</code>:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//...</span>
<span class="kd">const</span> <span class="p">[</span><span class="nx">breed</span><span class="p">,</span> <span class="nx">setBreed</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="dl">""</span><span class="p">);</span>
<span class="kd">const</span> <span class="p">[</span><span class="nx">breeds</span><span class="p">,</span> <span class="nx">setBreeds</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>
<span class="c1">//...</span></code></pre></figure>

<p>We‚Äôll get this wired up with a custom hook next.</p>

<h3 id="custom-hooks">Custom Hooks</h3>

<p>So far, the <code class="language-plaintext highlighter-rouge">htmlFor...</code> ‚Äòanimal‚Äô and ‚Äòbreed‚Äô are quite similar. Brian thinks it would be nice if there was some way to make them a reusable something for them. Let‚Äôs do that! Make a new file <code class="language-plaintext highlighter-rouge">useDropdown.js</code> and drop in the following code:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">useDropdown</span> <span class="o">=</span> <span class="p">(</span><span class="nx">label</span><span class="p">,</span> <span class="nx">defaultState</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">state</span><span class="p">,</span> <span class="nx">setState</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="nx">defaultState</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="s2">`use-dropdown-</span><span class="p">${</span><span class="nx">label</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">,</span> <span class="dl">""</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">()}</span><span class="s2">`</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">Dropdown</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="p">{</span><span class="nx">id</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="p">{</span><span class="nx">label</span><span class="p">}</span>
      <span class="o">&lt;</span><span class="nx">select</span>
        <span class="nx">id</span><span class="o">=</span><span class="p">{</span><span class="nx">id</span><span class="p">}</span>
        <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">state</span><span class="p">}</span>
        <span class="nx">onChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">setState</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span>
        <span class="nx">onBlur</span><span class="o">=</span><span class="p">{(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">setState</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span>
        <span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">options</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">}</span>
      <span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">option</span><span class="o">&gt;</span><span class="nx">All</span><span class="o">&lt;</span><span class="sr">/option</span><span class="err">&gt;
</span>        <span class="p">{</span><span class="nx">options</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
          <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">item</span><span class="p">}</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">item</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="p">{</span><span class="nx">item</span><span class="p">}</span>
          <span class="o">&lt;</span><span class="sr">/option</span><span class="err">&gt;
</span>        <span class="p">))}</span>
      <span class="o">&lt;</span><span class="sr">/select</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/label</span><span class="err">&gt;
</span>  <span class="p">);</span>

  <span class="k">return</span> <span class="p">[</span><span class="nx">state</span><span class="p">,</span> <span class="nx">Dropdown</span><span class="p">,</span> <span class="nx">setState</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">useDropdown</span><span class="p">;</span></code></pre></figure>

<p>Ok‚Ä¶ Let‚Äôs try to walk through that. <code class="language-plaintext highlighter-rouge">import React...</code> we‚Äôve seen. Every ‚Äòcomponent‚Äô has to have that line, we‚Äôre also grabbing the <code class="language-plaintext highlighter-rouge">{ useState }</code> function hook. <code class="language-plaintext highlighter-rouge">const Dropdown</code>, that‚Äôs the component declaration, with 3 parameters being passed in; <code class="language-plaintext highlighter-rouge">label</code>, <code class="language-plaintext highlighter-rouge">defaultState</code>, <code class="language-plaintext highlighter-rouge">options</code>. <code class="language-plaintext highlighter-rouge">const [state, setState]...</code> is the same pattern that was initially set up for the ‚Äòanimal‚Äô and ‚Äòbreed‚Äô drop downs, but abstracted here. <code class="language-plaintext highlighter-rouge">const id...</code> is establishing a unique ‚Äòid‚Äô that can be used for the <code class="language-plaintext highlighter-rouge">htmlFor</code> and <code class="language-plaintext highlighter-rouge">&lt;select&gt;</code> ‚Äòid(s)‚Äô and removing any spaces, then converting the entire string to lowercase (<code class="language-plaintext highlighter-rouge">.toLowerCase()</code>). <code class="language-plaintext highlighter-rouge">const Dropdown...</code> is effectively the Class that we are going to (re)use to make this drop down component flexible enough to be used with different data sets. The structure of it is just like the ‚Äòanimal‚Äô and ‚Äòbreed‚Äô drop downs we‚Äôve already created. <code class="language-plaintext highlighter-rouge">return...</code> will ‚Äòreturn‚Äô an array containing; ‚Äòstate‚Äô, the ‚ÄòDropdown‚Äô Class, and ‚ÄòsetState‚Äô. Finally, <code class="language-plaintext highlighter-rouge">useDropdown</code> is exported so we can then import it in another component file.</p>

<p>If you have any questions about that‚Ä¶ drop me a line.</p>

<p>Now we can update the <code class="language-plaintext highlighter-rouge">SearchParams.js</code> component to use our fancy new custom hook! Open <code class="language-plaintext highlighter-rouge">SearchParams.js</code> and get it updated to look like this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ANIMALS</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@frontendmasters/pet</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">useDropdown</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./useDropdown</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">SearchParams</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">location</span><span class="p">,</span> <span class="nx">setLocation</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="dl">"</span><span class="s2">Seattle, WA</span><span class="dl">"</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">breeds</span><span class="p">,</span> <span class="nx">setBreeds</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">animal</span><span class="p">,</span> <span class="nx">AnimalDropdown</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useDropdown</span><span class="p">(</span><span class="dl">"</span><span class="s2">Animal</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">dog</span><span class="dl">"</span><span class="p">,</span> <span class="nx">ANIMALS</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">breed</span><span class="p">,</span> <span class="nx">BreedDropdown</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useDropdown</span><span class="p">(</span><span class="dl">"</span><span class="s2">Breed</span><span class="dl">"</span><span class="p">,</span> <span class="dl">""</span><span class="p">,</span> <span class="nx">breeds</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">search-params</span><span class="dl">"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">form</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">location</span><span class="dl">"</span><span class="o">&gt;</span>
          <span class="nx">Location</span>
          <span class="o">&lt;</span><span class="nx">input</span>
            <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">location</span><span class="dl">"</span>
            <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">location</span><span class="p">}</span>
            <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Location</span><span class="dl">"</span>
            <span class="nx">onChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">setLocation</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span>
          <span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/label</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">AnimalDropdown</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nx">BreedDropdown</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nx">button</span><span class="o">&gt;</span><span class="nx">Submit</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/form</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">SearchParams</span><span class="p">;</span></code></pre></figure>

<p>Yeah! First is the new <code class="language-plaintext highlighter-rouge">import</code> statement for the <code class="language-plaintext highlighter-rouge">useDropdown.js</code> component we just made. Need that. Then, the <code class="language-plaintext highlighter-rouge">const(s)</code> have been updated to use the new hook; <code class="language-plaintext highlighter-rouge">useDropdown</code>. You can see we are passing in the ‚Äòlabel‚Äô, ‚ÄòdefaultState‚Äô, and the ‚Äòoptions‚Äô as defined inn <code class="language-plaintext highlighter-rouge">useDropdown.js</code>. Finally, we can get rid of all the ‚Äòanimal‚Äô and ‚Äòbreed‚Äô <code class="language-plaintext highlighter-rouge">&lt;label&gt;...&lt;/label&gt;</code> JSX and replace it with <code class="language-plaintext highlighter-rouge">&lt;AnimalDropdwn /&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;BreedDropdown /&gt;</code> respectively. Refresh your browser and while nothing (visually) has changed, we are now using a custom hook!</p>

<p>This pattern is quite useful for testing and helps us to be D.R.Y. Brians favorite!</p>

<h2 id="effects">Effects</h2>

<h3 id="effects-1">Effects</h3>

<p>Now we are going to start reading live data from an API. The data will be coming from PetFinder, which is one of the easiest ways to find pets to adopt. Let‚Äôs look at how to handle asynchronous code with React. The API is still restricted to ‚ÄòSeattle, WA‚Äô and ‚ÄòSan Francisco, CA‚Äô because Brian / Frontend Masters only has one API key and they don‚Äôt want to hammer the API with requests and get restricted. Open up <code class="language-plaintext highlighter-rouge">SearchParams.js</code> and update the file like this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useEffect</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">pet</span><span class="p">,</span> <span class="p">{</span> <span class="nx">ANIMALS</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@frontendmasters/pet</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">useDropdown</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./useDropdown</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">SearchParams</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">location</span><span class="p">,</span> <span class="nx">setLocation</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="dl">"</span><span class="s2">Seattle, WA</span><span class="dl">"</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">breeds</span><span class="p">,</span> <span class="nx">setBreeds</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">animal</span><span class="p">,</span> <span class="nx">AnimalDropdown</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useDropdown</span><span class="p">(</span><span class="dl">"</span><span class="s2">Animal</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">dog</span><span class="dl">"</span><span class="p">,</span> <span class="nx">ANIMALS</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">breed</span><span class="p">,</span> <span class="nx">BreedDropdown</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useDropdown</span><span class="p">(</span><span class="dl">"</span><span class="s2">Breed</span><span class="dl">"</span><span class="p">,</span> <span class="dl">""</span><span class="p">,</span> <span class="nx">breeds</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">pet</span><span class="p">.</span><span class="nx">breeds</span><span class="p">(</span><span class="dl">"</span><span class="s2">dog</span><span class="dl">"</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">,</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">search-params</span><span class="dl">"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">form</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">label</span> <span class="nx">htmlFor</span><span class="o">=</span><span class="dl">"</span><span class="s2">location</span><span class="dl">"</span><span class="o">&gt;</span>
          <span class="nx">Location</span>
          <span class="o">&lt;</span><span class="nx">input</span>
            <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">location</span><span class="dl">"</span>
            <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">location</span><span class="p">}</span>
            <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Location</span><span class="dl">"</span>
            <span class="nx">onChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">setLocation</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span>
          <span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/label</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">AnimalDropdown</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nx">BreedDropdown</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nx">button</span><span class="o">&gt;</span><span class="nx">Submit</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/form</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">SearchParams</span><span class="p">;</span></code></pre></figure>

<p>We‚Äôve updated the <code class="language-plaintext highlighter-rouge">import { ANIMALS }...</code> statement to include the <code class="language-plaintext highlighter-rouge">pet</code> object, and the <code class="language-plaintext highlighter-rouge">import React...</code> statement to also import <code class="language-plaintext highlighter-rouge">useEffect</code>. <code class="language-plaintext highlighter-rouge">useEffect</code> takes place of several lifecycle hooks, including; <code class="language-plaintext highlighter-rouge">componentDidMount</code>, <code class="language-plaintext highlighter-rouge">componentWillUnmount</code>, and <code class="language-plaintext highlighter-rouge">componentDidUpdate</code>. Let‚Äôs look at this line in a bit more depth:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//...</span>
<span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">pet</span><span class="p">.</span><span class="nx">breeds</span><span class="p">(</span><span class="dl">"</span><span class="s2">dog</span><span class="dl">"</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">,</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
<span class="p">});</span>
<span class="c1">//...</span></code></pre></figure>

<p>In effect, <code class="language-plaintext highlighter-rouge">useEffect</code> is ‚Äòscheduling‚Äô an event, in this case a function, to run after the (component) render happens. The <code class="language-plaintext highlighter-rouge">SearchParams.js</code> component will render before the <code class="language-plaintext highlighter-rouge">useEffect</code> function is run. But why Brian? Why would we want to do this? Using <code class="language-plaintext highlighter-rouge">useEffect</code> for asynchronous code will help to not slow the render down, so the user can see something immediately. If you refresh your page and check the console, you should be able to see the breeds returned from the API. Now we can set <code class="language-plaintext highlighter-rouge">setBreeds</code> to be all the various breeds of dogs that we have received from the API! Update the <code class="language-plaintext highlighter-rouge">useEffect</code> to this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//...</span>
<span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setBreeds</span><span class="p">([]);</span>
    <span class="nx">setBreed</span><span class="p">(</span><span class="dl">""</span><span class="p">);</span>

    <span class="nx">pet</span><span class="p">.</span><span class="nx">breeds</span><span class="p">(</span><span class="nx">animal</span><span class="p">).</span><span class="nx">then</span><span class="p">(({</span> <span class="nx">breeds</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">breedStrings</span> <span class="o">=</span> <span class="nx">breeds</span><span class="p">.</span><span class="nx">map</span><span class="p">(({</span> <span class="nx">name</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">name</span><span class="p">);</span>
        <span class="nx">setBreeds</span><span class="p">(</span><span class="nx">breedStrings</span><span class="p">);</span>
    <span class="p">},</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
<span class="p">});</span>
<span class="c1">//...</span></code></pre></figure>

<p>Now, whenever <code class="language-plaintext highlighter-rouge">useEffect</code> is triggered, we‚Äôll clear out the ‚Äòbreeds‚Äô array to an empty one, and reset the ‚Äòbreed‚Äô string to an empty string, then set breeds to the strings of the breed names by using <code class="language-plaintext highlighter-rouge">.map</code>.</p>

<h3 id="declaring-effect-dependencies">Declaring Effect Dependencies</h3>

<p>With <code class="language-plaintext highlighter-rouge">useEffect</code>, you have to declare your dependencies. Currently, without any dependencies listed, <code class="language-plaintext highlighter-rouge">useEffect</code> will run every time something is typed into the input field. We do not want this, it is too frequent. Update the <code class="language-plaintext highlighter-rouge">useEffect</code> in <code class="language-plaintext highlighter-rouge">SearchParams.js</code> to this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//...</span>
<span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setBreeds</span><span class="p">([]);</span>
    <span class="nx">setBreed</span><span class="p">(</span><span class="dl">""</span><span class="p">);</span>

    <span class="nx">pet</span><span class="p">.</span><span class="nx">breeds</span><span class="p">(</span><span class="nx">animal</span><span class="p">).</span><span class="nx">then</span><span class="p">(({</span> <span class="nx">breeds</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">breedStrings</span> <span class="o">=</span> <span class="nx">breeds</span><span class="p">.</span><span class="nx">map</span><span class="p">(({</span> <span class="nx">name</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">name</span><span class="p">);</span>
        <span class="nx">setBreeds</span><span class="p">(</span><span class="nx">breedStrings</span><span class="p">);</span>
    <span class="p">},</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
<span class="p">},</span> <span class="p">[</span><span class="nx">animal</span><span class="p">,</span> <span class="nx">setBreed</span><span class="p">,</span> <span class="nx">setBreeds</span><span class="p">]);</span>
<span class="c1">//...</span></code></pre></figure>

<p>The array <code class="language-plaintext highlighter-rouge">[animal, setBreed, setBreeds]</code> at the end of the <code class="language-plaintext highlighter-rouge">useEffect</code> will be the conditions that are checked against to determine whether or not <code class="language-plaintext highlighter-rouge">useEffect</code> needs to run again and trigger a render. If something that is not defined within the array of dependencies changes (location?), <code class="language-plaintext highlighter-rouge">useEffect</code> will not run. If you refresh your browser, you can see that typing in the input field will no longer cause React to retrieve breeds, only when you change the animal ‚Äòtype‚Äô (dog, cat, etc.) will the <code class="language-plaintext highlighter-rouge">useEffect</code> get triggered to retrieve the breeds associated with the supplied animal.</p>

<h3 id="effect-lifecycle-walkthrough">Effect Lifecycle Walkthrough</h3>

<p>There has been a lot of things happening since we‚Äôve started to use <code class="language-plaintext highlighter-rouge">useEffect</code>. Let‚Äôs walk though exactly what is happening with that.</p>

<p>In <code class="language-plaintext highlighter-rouge">SearchParams.js</code>, first we declare the component <code class="language-plaintext highlighter-rouge">SearchParams</code>, then set state for a number of hooks (location, breeds, animal, breed). The <code class="language-plaintext highlighter-rouge">useEffect</code> is ‚Äòscheduled‚Äô, but not triggered on the initial render of the <code class="language-plaintext highlighter-rouge">SearchParams</code> component. Then, all of the markup is going to be <code class="language-plaintext highlighter-rouge">return</code>ed, which is then rendered to the DOM for the user to üëÄ. Then, the <code class="language-plaintext highlighter-rouge">useEffect</code> can be run. <code class="language-plaintext highlighter-rouge">useEffect</code> will <code class="language-plaintext highlighter-rouge">setBreeds</code> to an empty array, <code class="language-plaintext highlighter-rouge">setBreed</code> to an empty string, and will then hit the API to get the <code class="language-plaintext highlighter-rouge">breedStrings</code>.</p>

<p>Now, if you update the location in the input field, will <code class="language-plaintext highlighter-rouge">useEffect</code> run again? Nope, because we have defined the dependencies for <code class="language-plaintext highlighter-rouge">useEffect</code> and location is not one of them, a re-render / re-run of <code class="language-plaintext highlighter-rouge">useEffect</code> will not be triggered. If you then change the animal, to say ‚Äòcat‚Äô, <code class="language-plaintext highlighter-rouge">useEffect</code> will be triggered. It will call the API and get the breeds for ‚Äòcat‚Äô back and <code class="language-plaintext highlighter-rouge">setBreeds</code> to be an array of strings of breeds.</p>

<h3 id="run-only-once">Run Only Once</h3>

<p>What happens if you only want the <code class="language-plaintext highlighter-rouge">useEffect</code> to run when the component mounts and then never run again? Just give the <code class="language-plaintext highlighter-rouge">useEffect</code> and empty array <code class="language-plaintext highlighter-rouge">[]</code> as its dependencies and it will run once and never again. An example use case could be when you need to do something once and not again, say when you are setting up D3.js. If you remove the <code class="language-plaintext highlighter-rouge">, []</code>, you will trigger an infinite loop which will endlessly call the API. Do not do that, Brian pays for access to the API and, even with all of his kickbacks, is not made of money.</p>

<h3 id="hooks-review-and-qa">Hooks Review and Q&amp;A</h3>

<p>Q: Why is <code class="language-plaintext highlighter-rouge">breeds</code> not a dependency of <code class="language-plaintext highlighter-rouge">useEffect</code>?</p>

<p>A: Because the <code class="language-plaintext highlighter-rouge">breeds</code> in the <code class="language-plaintext highlighter-rouge">useEffect</code> is not the same as the <code class="language-plaintext highlighter-rouge">breeds</code> defined in the const above it. The <code class="language-plaintext highlighter-rouge">breeds</code> in <code class="language-plaintext highlighter-rouge">useEffect</code> could be renamed to remove confusion.</p>

<p>Q: Was there any problem with the <code class="language-plaintext highlighter-rouge">componentDidMount</code> or <code class="language-plaintext highlighter-rouge">componentDidUnmount</code> lifecycle methods, why did hooks get created?</p>

<p>A: There is a belief that hooks are simpler than having to learn the lifecycle of components and having to understand context and such. But Brian has his doubts about which is better, we will look more closely at this when we look at Class. But the short answer is that people think hooks are easier.</p>

<p><code class="language-plaintext highlighter-rouge">useState</code> and <code class="language-plaintext highlighter-rouge">useEffect</code> are the most commonly used hooks and will constitute about 90% of your use of hooks. <code class="language-plaintext highlighter-rouge">useRef</code> also on occasion. There are many other hooks that you may never have to know which are covered in the Intermediate React workshop.</p>

<h2 id="dev-tools">Dev Tools</h2>

<h3 id="environment-variables--strict-mode">Environment Variables &amp; Strict Mode</h3>

<p>It is important to note that you need to set <code class="language-plaintext highlighter-rouge">NODE_ENV</code> to <code class="language-plaintext highlighter-rouge">development</code> or <code class="language-plaintext highlighter-rouge">production</code> depending on which environment you are building for. Parcel will handle that for you, but Webpack requires you to be more explicit and actually set it. When you are in development mode, React will provide more descriptive errors and help you along the way. In production mode, React drops all the debugging code, making your application smaller and faster. Slack famously messed this up and were shipping the dev environment / code for a long time ü§£.</p>

<p>You can wrap your entire application in <code class="language-plaintext highlighter-rouge">&lt;React.StrictMode&gt;&lt;/React.StrictMode&gt;</code> which will give you additional warnings about things you shouldn‚Äôt be doing. It will ‚Äòfuture proof‚Äô your application in the sense that when features of React are being deprecated, you will receive warnings for those features if they are being used. <code class="language-plaintext highlighter-rouge">React.StrictMode</code> doesn‚Äôt render anything or add any additional code, so this is fine to keep even when you are shipping your application(s).</p>

<h3 id="react-browser-dev-tools">React Browser Dev Tools</h3>

<p>Do yourself a favor and get React Dev Tools for <a href="https://addons.mozilla.org/en-US/firefox/addon/react-devtools/">Firefox</a> or <a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en">Chrome</a>. Brian has them and so shall you. All the other browsers didn‚Äôt have React Dev Tools in 2019. Maybe you, reader from the future, may have better luck.</p>

<p>The tool is useful in that you can inspect the React DOM of your application, something that you cannot do with the normal browser inspect tool. Cool thing:</p>

<p>In both the standard browser and React inspector tools, if you highlight a DOM element, then switch to the console, you can type <code class="language-plaintext highlighter-rouge">$0</code> or <code class="language-plaintext highlighter-rouge">$r</code> respectively to manipulate the currently highlighted DOM element.</p>

<h2 id="async--routing">Async &amp; Routing</h2>

<h3 id="asynchronous-api-requests">Asynchronous API Requests</h3>

<p>Our app currently has all the search facets that we will need to search for pets, but we are not actually using that to hit the API yet, so let‚Äôs set that up! Open up <code class="language-plaintext highlighter-rouge">SearchParams.js</code> and update it to look include this code:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// inside of SearchParams after the other const declarations</span>
<span class="kd">const</span> <span class="p">[</span><span class="nx">pets</span><span class="p">,</span> <span class="nx">setPets</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">requestPets</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">animals</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">pet</span><span class="p">.</span><span class="nx">animals</span><span class="p">({</span>
      <span class="nx">location</span><span class="p">,</span>
      <span class="nx">breed</span><span class="p">,</span>
      <span class="na">type</span><span class="p">:</span> <span class="nx">animal</span><span class="p">,</span>
    <span class="p">});</span>

    <span class="nx">setPets</span><span class="p">(</span><span class="nx">animals</span> <span class="o">||</span> <span class="p">[]);</span>
  <span class="p">}</span>

<span class="c1">// replace &lt;form&gt; with this</span>
<span class="o">&lt;</span><span class="nx">form</span>
    <span class="nx">onSubmit</span><span class="o">=</span><span class="p">{(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
        <span class="nx">requestPets</span><span class="p">();</span>
    <span class="p">}}</span>
<span class="o">&gt;</span></code></pre></figure>

<p>In the above code, we‚Äôve already seen and learned about the <code class="language-plaintext highlighter-rouge">const</code> and <code class="language-plaintext highlighter-rouge">useState</code>. <code class="language-plaintext highlighter-rouge">async</code> is new, so let‚Äôs look at that. The <code class="language-plaintext highlighter-rouge">const { animals }</code> inside of <code class="language-plaintext highlighter-rouge">requestPets()</code> will only be set once the <code class="language-plaintext highlighter-rouge">await</code> resolves. If <code class="language-plaintext highlighter-rouge">await</code> returns nothing, <code class="language-plaintext highlighter-rouge">setPets</code> will be set to an empty array <code class="language-plaintext highlighter-rouge">[]</code>. Then the <code class="language-plaintext highlighter-rouge">&lt;form&gt;</code> element is updated to call the <code class="language-plaintext highlighter-rouge">requestPets</code> function on submit. Because we don‚Äôt want to trigger the default behavior of the submit button, we also add <code class="language-plaintext highlighter-rouge">e.preventDefault();</code>.</p>

<p>Then Brian says that we should update the <code class="language-plaintext highlighter-rouge">package.json</code> file with browsers that we would like Parcel to target, <a href="https://btholt.github.io/complete-intro-to-react-v5/async">here is the information about that in the course notes</a>‚Ä¶ and it looks like you actually need to do that, otherwise Parcel will break the <code class="language-plaintext highlighter-rouge">async / await</code> ü§¨. Add this to <code class="language-plaintext highlighter-rouge">package.json</code> (anywhere is fine, I put mine at the bottom of the file):</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="err">,</span><span class="w">
  </span><span class="nl">"browserslist"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"last 2 Chrome versions"</span><span class="p">]</span></code></pre></figure>

<p>Now Parcel won‚Äôt break the <code class="language-plaintext highlighter-rouge">async / await</code> and if you check the ‚ÄòNetwork‚Äô tab in your browsers Developer Tools, you should be able to select an animal, a breed, and click ‚ÄòSubmit‚Äô and see that the network request to the API occurs. Amazing.</p>

<h3 id="using-the-fallback-mock-api">Using the Fallback Mock API</h3>

<p>I am not going to do this Brian. If you, the reader of these notes, are interested, you can check out <a href="https://btholt.github.io/complete-intro-to-react-v5/effects">this section of Brian‚Äôs notes</a>. The specific section that he goes over starts at:</p>

<p>‚ÄúSince this Petfinder is a real service and we don‚Äôt want to hammer their API, we‚Äôve built a client that heavily caches responses and limits your‚Ä¶‚Äù</p>

<p>Apparently you can do this entire workshop offline.</p>

<h3 id="one-way-data-flow">One-Way Data Flow</h3>

<p>If you‚Äôve got this far, we‚Äôre now receiving results from the API. Let‚Äôs get them to display! Add this to <code class="language-plaintext highlighter-rouge">SearchParams.js</code>:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// after import pet, ...</span>
<span class="k">import</span> <span class="nx">Results</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./Results</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// after &lt;/form&gt;</span>
<span class="o">&lt;</span><span class="nx">Results</span> <span class="nx">pets</span><span class="o">=</span><span class="p">{</span><span class="nx">pets</span><span class="p">}</span> <span class="sr">/&gt;</span></code></pre></figure>

<p>But I don‚Äôt have a <code class="language-plaintext highlighter-rouge">Results.js</code> component yet! Ok‚Ä¶ make a <code class="language-plaintext highlighter-rouge">Results.js</code> file inside of <code class="language-plaintext highlighter-rouge">src</code> and add this to it:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Pet</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./Pet</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">Results</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">pets</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">search</span><span class="dl">"</span><span class="o">&gt;</span>
      <span class="p">{</span><span class="nx">pets</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">?</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">No</span> <span class="nx">Pets</span> <span class="nx">Found</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="p">)</span> <span class="p">:</span> <span class="p">(</span>
        <span class="nx">pets</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">pet</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
          <span class="o">&lt;</span><span class="nx">Pet</span>
            <span class="nx">animal</span><span class="o">=</span><span class="p">{</span><span class="nx">pet</span><span class="p">.</span><span class="nx">type</span><span class="p">}</span>
            <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">pet</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
            <span class="nx">name</span><span class="o">=</span><span class="p">{</span><span class="nx">pet</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
            <span class="nx">breed</span><span class="o">=</span><span class="p">{</span><span class="nx">pet</span><span class="p">.</span><span class="nx">breeds</span><span class="p">.</span><span class="nx">primary</span><span class="p">}</span>
            <span class="nx">media</span><span class="o">=</span><span class="p">{</span><span class="nx">pet</span><span class="p">.</span><span class="nx">photos</span><span class="p">}</span>
            <span class="nx">location</span><span class="o">=</span><span class="p">{</span><span class="s2">`</span><span class="p">${</span><span class="nx">pet</span><span class="p">.</span><span class="nx">contact</span><span class="p">.</span><span class="nx">address</span><span class="p">.</span><span class="nx">city</span><span class="p">}</span><span class="s2">, </span><span class="p">${</span><span class="nx">pet</span><span class="p">.</span><span class="nx">contact</span><span class="p">.</span><span class="nx">address</span><span class="p">.</span><span class="nx">state</span><span class="p">}</span><span class="s2">`</span><span class="p">}</span>
            <span class="nx">id</span><span class="o">=</span><span class="p">{</span><span class="nx">pet</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
          <span class="sr">/</span><span class="err">&gt;
</span>        <span class="p">))</span>
      <span class="p">)}</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">Results</span><span class="p">;</span></code></pre></figure>

<p>Once you have the above code, you should now be able to refresh your browser, select something about an animal and breed, hit Submit and see some results. We‚Äôre using a component that we created early on, <code class="language-plaintext highlighter-rouge">Pet.js</code>, to display the data and setting up a bunch of attributes on that component from within <code class="language-plaintext highlighter-rouge">Results.js</code> such as, animal, key, name, breed, etc‚Ä¶ We will refactor the <code class="language-plaintext highlighter-rouge">Pet.js</code> component in a moment to use the additional attributes.</p>

<h3 id="reformatting-the-pet-component">Reformatting the Pet Component</h3>

<p>Open up <code class="language-plaintext highlighter-rouge">Pet.js</code> and replace the code with this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">Pet</span><span class="p">({</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">animal</span><span class="p">,</span> <span class="nx">breed</span><span class="p">,</span> <span class="nx">media</span><span class="p">,</span> <span class="nx">location</span><span class="p">,</span> <span class="nx">id</span> <span class="p">})</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">hero</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">http://placecorgi.com/300/300</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">media</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">hero</span> <span class="o">=</span> <span class="nx">media</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">small</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="p">{</span><span class="s2">`/details/</span><span class="p">${</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">}</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">pet</span><span class="dl">"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">image-container</span><span class="dl">"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">src</span><span class="o">=</span><span class="p">{</span><span class="nx">hero</span><span class="p">}</span> <span class="nx">alt</span><span class="o">=</span><span class="p">{</span><span class="nx">name</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">info</span><span class="dl">"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="p">{</span><span class="s2">`</span><span class="p">${</span><span class="nx">animal</span><span class="p">}</span><span class="s2"> - </span><span class="p">${</span><span class="nx">breed</span><span class="p">}</span><span class="s2"> - </span><span class="p">${</span><span class="nx">location</span><span class="p">}</span><span class="s2">`</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h2</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/a</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">Pet.js</code> will now use those additional attributes that were set up in the <code class="language-plaintext highlighter-rouge">Results.js</code> component. First, if there is no image, the <code class="language-plaintext highlighter-rouge">let hero=...</code> statement will provide a default image from Brians favorite image placeholder site, otherwise, if there is an image, the small image for the pet will be used. Then in the <code class="language-plaintext highlighter-rouge">return</code> statement, the JSX has been updated to use all of the additional attributes / data that we will receive from any given result. First wrapping everything in an <code class="language-plaintext highlighter-rouge">&lt;a&gt;</code> tag (which we will set up in a moment) and then a couple of divs which use the remaining information that we will receive for any given pet. Check out the result in your browser and see if you
can spot the (default) corgi images.</p>

<h3 id="reach-router">Reach Router</h3>

<p>There‚Äôs React Router, Navi Router, and Reach Router. Reach Router is Brian‚Äôs fave because it handles a lot of the accessibility things for you. Make your life easier, use Reach Router‚Ñ¢Ô∏è. We are now going to implement Reach Router, but Brian also would like you to know that just because <em>we</em> are going to make a Single Page Application does not mean that <strong>every</strong> app needs to be one. Think about the ideal set up for your application, don‚Äôt always make a Single Page Application because not every application should be one. Brian always takes the fun out of everything üòû.</p>

<p>Make a new file in the <code class="language-plaintext highlighter-rouge">src</code> directory, <code class="language-plaintext highlighter-rouge">Details.js</code>. In that file add:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">Details</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">hello</span><span class="o">&lt;</span><span class="sr">/h1&gt;</span><span class="err">;
</span><span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">Details</span><span class="p">;</span></code></pre></figure>

<p>Put whatever you like in the <code class="language-plaintext highlighter-rouge">&lt;h1&gt;</code>, we‚Äôll be replacing that with other stuff eventually. Have some fun! Just kidding‚Ä¶ instead of having fun, install Reach Router. You can add this to the top of your <code class="language-plaintext highlighter-rouge">App.js</code> file and have Parcel do it for you <code class="language-plaintext highlighter-rouge">import { Router } from "@reach/router";</code> <strong>or</strong> you can use the terminal and type <code class="language-plaintext highlighter-rouge">npm i @reach/router</code> if you don‚Äôt trust Parcel ‚úã. Once you have Reach Router installed, update <code class="language-plaintext highlighter-rouge">App.js</code> so that it looks like this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">render</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-dom</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Router</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@reach/router</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">SearchParams</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./SearchParams</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Details</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./Details</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Adopt</span> <span class="nx">Me</span><span class="o">!&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">Router</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">SearchParams</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nx">Details</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/details/:id</span><span class="dl">"</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="sr">/Router</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>

<span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">root</span><span class="dl">"</span><span class="p">));</span></code></pre></figure>

<p>You tell me what any of that is‚Ä¶ Ok fine, I‚Äôll tell you. There‚Äôs 2 new <code class="language-plaintext highlighter-rouge">import</code> statements, one for Reach Router, one for the <code class="language-plaintext highlighter-rouge">Details.js</code> file we <strong>just</strong> created. Then in the <code class="language-plaintext highlighter-rouge">App</code> <code class="language-plaintext highlighter-rouge">return</code> statement, the JSX is updated to use Reach Router by wrapping the <code class="language-plaintext highlighter-rouge">SearchParams</code> and <code class="language-plaintext highlighter-rouge">Details</code> in a <code class="language-plaintext highlighter-rouge">Router</code>. Note that both <code class="language-plaintext highlighter-rouge">SearchParams</code> and <code class="language-plaintext highlighter-rouge">Details</code> also have <code class="language-plaintext highlighter-rouge">path="..."</code>, these will be the actual routes that we will hit, so <code class="language-plaintext highlighter-rouge">SearchParams</code> will live at the root of our application and the <code class="language-plaintext highlighter-rouge">Details</code> ‚Äòpages‚Äô will live at <code class="language-plaintext highlighter-rouge">/details/:id</code> where <code class="language-plaintext highlighter-rouge">:id</code> will depend on the ‚Äòid‚Äô of the pet (which is included in the updates we made to the <code class="language-plaintext highlighter-rouge">Pet.js</code> component). Boom! Refresh your page and watch the magic, or rather, do the things to get a list of pets to display, then click one, or alternatively add <code class="language-plaintext highlighter-rouge">/details/1</code> (or whatever number you feel like typing) to the end of the URL in your browser and you should see the <code class="language-plaintext highlighter-rouge">Details.js</code> component appear!</p>

<h3 id="debugging--reach-router-link">Debugging &amp; Reach Router Link</h3>

<p>Back in <code class="language-plaintext highlighter-rouge">Details.js</code>, let‚Äôs look at what ‚Äòprops‚Äô our component is getting. Update the file like this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">Details</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">pre</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">code</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">props</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">4</span><span class="p">)}</span><span class="o">&lt;</span><span class="sr">/code</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/pre</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">Details</span><span class="p">;</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">JSON.stingify</code> is going to take the <code class="language-plaintext highlighter-rouge">props</code> and render them on the page in a ‚ÄòPretty Printed‚Äô kind of way. If you go to a details page, you will be able to see all of the things that are coming from the (Reach) router. You should see something like this:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/details/:id"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41569882"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/details/41569882"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"pathname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/details/41569882"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"search"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:1234/details/41569882"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"origin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:1234"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"protocol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"localhost:1234"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"hostname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"localhost"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"initial"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>The above is also a nice technique to use with ‚Äòstate‚Äô to be able to see (in the DOM) how state changes over time. You can also just use React Dev Tools. Now that you‚Äôve seen that little gem, let‚Äôs make the ‚ÄòAdopt Me!‚Äô logo take us back to the home page when it‚Äôs clicked! To do that, we‚Äôll use React Router‚Äôs <code class="language-plaintext highlighter-rouge">&lt;Link&gt;</code> tag. Update <code class="language-plaintext highlighter-rouge">App.js</code> so that it looks like this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">render</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-dom</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Router</span><span class="p">,</span> <span class="nx">Link</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@reach/router</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">SearchParams</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./SearchParams</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Details</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./Details</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">header</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Link</span> <span class="nx">to</span><span class="o">=</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Adopt</span> <span class="nx">Me</span><span class="o">!&lt;</span><span class="sr">/Link</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/header</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">Router</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">SearchParams</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nx">Details</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/details/:id</span><span class="dl">"</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="sr">/Router</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>

<span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">root</span><span class="dl">"</span><span class="p">));</span></code></pre></figure>

<p>We‚Äôve added an additional import to Reach Router; <code class="language-plaintext highlighter-rouge">Link</code> and have replaced the <code class="language-plaintext highlighter-rouge">&lt;h1&gt;</code> with the <code class="language-plaintext highlighter-rouge">&lt;header&gt;</code> element and all the things inside of it. Now your ‚ÄòAdopt Me!‚Äô logo will take you back to the home page! That‚Äôs the bulk of what we will directly learn about Reach Router, but Brian may sprinkle some more in throughout the rest of the course.</p>

<h2 id="class-components">Class Components</h2>

<h3 id="class-components-1">Class Components</h3>

<p>So far, all we‚Äôve covered is hooks. How to do state with hooks, which used to be called stateless functional components, now called function components, meaning a function that is not a Class. Brian will now show the <em>other way</em>  of making components, which is‚Ä¶ Class components. Class components function similarly to stateless functional components, but in some ways they function differently. Let‚Äôs update <code class="language-plaintext highlighter-rouge">Details.js</code> to be a Class component. Update <code class="language-plaintext highlighter-rouge">Details.js</code> like this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">pet</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@frontendmasters/pet</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">Details</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">loading</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">pet</span><span class="p">.</span><span class="nx">animal</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">then</span><span class="p">(({</span> <span class="nx">animal</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
        <span class="na">name</span><span class="p">:</span> <span class="nx">animal</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
        <span class="na">animal</span><span class="p">:</span> <span class="nx">animal</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
        <span class="na">location</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">animal</span><span class="p">.</span><span class="nx">contact</span><span class="p">.</span><span class="nx">address</span><span class="p">.</span><span class="nx">city</span><span class="p">}</span><span class="s2">, </span><span class="p">${</span><span class="nx">animal</span><span class="p">.</span><span class="nx">contact</span><span class="p">.</span><span class="nx">address</span><span class="p">.</span><span class="nx">state</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
        <span class="na">description</span><span class="p">:</span> <span class="nx">animal</span><span class="p">.</span><span class="nx">description</span><span class="p">,</span>
        <span class="na">media</span><span class="p">:</span> <span class="nx">animal</span><span class="p">.</span><span class="nx">photos</span><span class="p">,</span>
        <span class="na">breed</span><span class="p">:</span> <span class="nx">animal</span><span class="p">.</span><span class="nx">breeds</span><span class="p">.</span><span class="nx">primary</span><span class="p">,</span>
        <span class="na">loading</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="p">});</span>
    <span class="p">},</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">Details</span><span class="p">;</span></code></pre></figure>

<p>ü§¶üèª‚Äç‚ôÇÔ∏è Brian, you have given me a lot to explain‚Ä¶</p>

<p>Top to bottom:</p>

<p>Added an <code class="language-plaintext highlighter-rouge">import</code> statement for the <code class="language-plaintext highlighter-rouge">pet</code> API.</p>

<p>Made a <code class="language-plaintext highlighter-rouge">class</code>, <code class="language-plaintext highlighter-rouge">Details</code>, which extends <code class="language-plaintext highlighter-rouge">React.Component</code>. This will give us access to a bunch of useful things that <code class="language-plaintext highlighter-rouge">React.Component</code> has.</p>

<p>Added a <code class="language-plaintext highlighter-rouge">constructor</code> inside of <code class="language-plaintext highlighter-rouge">Details</code>. This is what allows the <code class="language-plaintext highlighter-rouge">Details</code> component to have state for itself, which no other component can touch. Parents pass props to children that the children cannot change. Children cannot pass props to their parents.</p>

<p><code class="language-plaintext highlighter-rouge">componentDidMount()</code> this is one of the things we get from <code class="language-plaintext highlighter-rouge">React.Component</code>. It is a lifecycle method and will only run once, when the component mounted. Hooks gave us <code class="language-plaintext highlighter-rouge">useState</code>, but we cannot use any hooks in a Class component (not sure why I keep capitalizing Class‚Ä¶). So, <code class="language-plaintext highlighter-rouge">componentDidMount()</code>‚Ä¶ <a href="https://reactjs.org/docs/react-component.html#componentdidmount">Here‚Äôs a list of React‚Äôs lifecycle methods, starting with componentDidMount()</a>. Inside of this lifecycle method we are going to hit the <code class="language-plaintext highlighter-rouge">pet</code> API and update state with the result.<code class="language-plaintext highlighter-rouge">setState</code> is a ‚Äòshallow merge‚Äô meaning any top-level properties in the state will be overwritten if they exist, other non-duplicate properties will remain untouched, and nested objects will not be included. Keep your state flat like Florida. Throw a lazy <code class="language-plaintext highlighter-rouge">console.error</code> in there and we‚Äôre good to go.</p>

<p>The only thing we didn‚Äôt do was <strong>actually</strong> render this component. Hang tight, we will do that next.</p>

<h3 id="rendering-the-component">Rendering the Component</h3>

<p>Let‚Äôs update the <code class="language-plaintext highlighter-rouge">render()</code> for <code class="language-plaintext highlighter-rouge">Details.js</code>. Make the <code class="language-plaintext highlighter-rouge">render()</code> inside of <code class="language-plaintext highlighter-rouge">Details.js</code> look like this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//...</span>
<span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">loading</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">loading</span> <span class="p">...</span><span class="o">&lt;</span><span class="sr">/h1&gt;</span><span class="err">;
</span>    <span class="p">}</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">animal</span><span class="p">,</span> <span class="nx">breed</span><span class="p">,</span> <span class="nx">location</span><span class="p">,</span> <span class="nx">description</span><span class="p">,</span> <span class="nx">name</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">details</span><span class="dl">"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="p">{</span><span class="s2">`</span><span class="p">${</span><span class="nx">animal</span><span class="p">}</span><span class="s2"> - </span><span class="p">${</span><span class="nx">breed</span><span class="p">}</span><span class="s2"> - </span><span class="p">${</span><span class="nx">location</span><span class="p">}</span><span class="s2">`</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h2</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">button</span><span class="o">&gt;</span><span class="nx">Adopt</span> <span class="p">{</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">description</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="c1">//...</span></code></pre></figure>

<p>Walking through the updated render, if <code class="language-plaintext highlighter-rouge">loading</code> is <code class="language-plaintext highlighter-rouge">true</code>, which it will be on page load until the detail data about a pet is returned, show ‚Äòloading ‚Ä¶‚Äô. You can try this out by going to a (detail) page that is not real; i.e. /details/1 should work. Then Brian destructures state to make the ‚Äòcalling‚Äô of the parts of state he will work with easier / less verbose to access (I also like this approach). The rest of the JSX should be familiar at this point, we‚Äôre just building out the thing to show the stuff. Go to the home page of your application, search for some animals, click one to get to its detail page and see the result!</p>

<p>Classes are how React was (originally) built (before hooks), and while they may appear to be a more difficult way of writing React, there are currently no plans to deprecate them.</p>

<h3 id="configuring-babel-for-parcel">Configuring Babel for Parcel</h3>

<p>It would be a bit simpler if instead of this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">loading</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">};</span>
  <span class="p">}</span></code></pre></figure>

<p>We could write this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="na">loading</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span></code></pre></figure>

<p>The second way, as of 2018?, <del>was a proposal</del> for JavaScript and <del>isn‚Äôt actually a</del> <strong>is a</strong> thing (yet), but with Babel we can make it work! So if you are in 2018 and reading these notes follow along, otherwise skip to the next section!</p>

<p>Open your console and type (or just copy / paste) this: <code class="language-plaintext highlighter-rouge">npm install -D babel-eslint @babel/core @babel/preset-env @babel/plugin-proposal-class-properties @babel/preset-react</code>.</p>

<p>WHAT?! All of this stuff is built into Parcel which has been handling this for us. But we have custom needs, so installing all these things will allow us to use a custom config instead of Parcel‚Äôs. In the root of the project, make a new file, <code class="language-plaintext highlighter-rouge">.babelrc</code>. Then drop this into that file:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nl">"presets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"@babel/preset-react"</span><span class="p">,</span><span class="w"> </span><span class="s2">"@babel/preset-env"</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="nl">"plugins"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"@babel/plugin-proposal-class-properties"</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">@babel/preset-react</code> provides all the things we need to transpile React; JSX and Flow (which is not something that we are using, but it is included).</p>

<p><code class="language-plaintext highlighter-rouge">@babel/preset-env</code> will transpile your code for the environment that you specify, which we‚Äôve already done in <code class="language-plaintext highlighter-rouge">package.json</code> (browserslist). <code class="language-plaintext highlighter-rouge">@babel/preset-env</code> can also take an export from your Google Analytics which it will then use to transpile your code so that it functions for 99% of your users üî•.</p>

<p><code class="language-plaintext highlighter-rouge">@babel/plugin-proposal-class-properties</code> allows you to use the syntax that started us on this journey. Again, this syntax should already be usable for you by now.</p>

<p>Finally, add this line to your <code class="language-plaintext highlighter-rouge">.eslintrc.json</code> file:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="err">//...</span><span class="w">
</span><span class="nl">"parser"</span><span class="p">:</span><span class="w"> </span><span class="s2">"babel-eslint"</span><span class="err">,</span><span class="w">
</span><span class="err">//...</span></code></pre></figure>

<p>This will allow Babel to understand the new syntax that we are trying to use. Now you can use that new syntax that you could already use.</p>

<h3 id="creating-an-image-carousel">Creating an Image Carousel</h3>

<p>Make a new file in the <code class="language-plaintext highlighter-rouge">src</code> directory called <code class="language-plaintext highlighter-rouge">Carousel.js</code> because we want to make a happy little carousel for the people to be able to see the various different pictures of the animals. Add this to <code class="language-plaintext highlighter-rouge">Carousel.js</code>:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">Carousel</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">photos</span><span class="p">:</span> <span class="p">[],</span>
        <span class="na">active</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">};</span>
    <span class="kd">static</span> <span class="nx">getDerivedStateFromProps</span><span class="p">({</span> <span class="nx">media</span> <span class="p">})</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">photos</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">http://plaacecorgi.com/600/600</span><span class="dl">'</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">media</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">photos</span> <span class="o">=</span> <span class="nx">media</span><span class="p">.</span><span class="nx">map</span><span class="p">(({</span> <span class="nx">large</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">large</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="p">{</span> <span class="nx">photos</span> <span class="p">};</span>
    <span class="p">}</span>

    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">photos</span><span class="p">,</span> <span class="nx">active</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">carousel</span><span class="dl">"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">src</span><span class="o">=</span><span class="p">{</span><span class="nx">photos</span><span class="p">[</span><span class="nx">active</span><span class="p">]}</span> <span class="nx">alt</span><span class="o">=</span><span class="dl">"</span><span class="s2">animal</span><span class="dl">"</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">carousel-smaller</span><span class="dl">"</span><span class="o">&gt;</span>
                    <span class="p">{</span><span class="nx">photos</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">photo</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
                        <span class="o">&lt;</span><span class="nx">img</span>
                        <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">photo</span><span class="p">}</span>
                        <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleIndexClick</span><span class="p">}</span>
                        <span class="nx">data</span><span class="o">-</span><span class="nx">index</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span>
                        <span class="nx">src</span><span class="o">=</span><span class="p">{</span><span class="nx">photo</span><span class="p">}</span>
                        <span class="nx">className</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span> <span class="o">===</span> <span class="nx">active</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">active</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">""</span><span class="p">}</span>
                        <span class="nx">alt</span><span class="o">=</span><span class="dl">"</span><span class="s2">animal thumbnail</span><span class="dl">"</span>
                    <span class="p">))}</span>
                <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">Carousel</span><span class="p">;</span></code></pre></figure>

<p>Another Class component! Now that we are in the future and can use the <code class="language-plaintext highlighter-rouge">state = {};</code> syntax, our component is a bit cleaner! Let‚Äôs break down the new bits:</p>

<p><code class="language-plaintext highlighter-rouge">static getDerivedStateFromProps</code> - This will allow our component to access its parent props and use them for something, in this case we are capturing the <code class="language-plaintext highlighter-rouge">media</code> and updating the <code class="language-plaintext highlighter-rouge">photo</code> property in our components state, then returning that from <code class="language-plaintext highlighter-rouge">getDerivedStateFromProps</code> so that the carousel component can use em. <a href="https://reactjs.org/docs/react-component.html#static-getderivedstatefromprops">Here‚Äôs React‚Äôs documentation on getDerivedStateFromProps which is way better than my explanation</a></p>

<p>The rest of the carousel component set up is JSX, the only part left unhandled is the <code class="language-plaintext highlighter-rouge">onClick</code> event. Please hold.</p>

<h3 id="context">Context</h3>

<p>Still inside of <code class="language-plaintext highlighter-rouge">Carousel.js</code>, add this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">handleIndexClick</span> <span class="o">=</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
        <span class="na">active</span><span class="p">:</span> <span class="o">+</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">index</span>
    <span class="p">});</span>
<span class="p">};</span></code></pre></figure>

<p>That will be the event that gets triggered when an image is clicked. It is important to note that we are using an arrow function here so that <code class="language-plaintext highlighter-rouge">this</code> is bound to the context of the Carousel class that it is in. Brian recommends:</p>

<blockquote>
  <p>Whenever you are writing an event listener, use an arrow function. Your <code class="language-plaintext highlighter-rouge">this</code> will be correct.</p>
</blockquote>

<h3 id="index-click-qa">Index Click Q&amp;A</h3>

<p>Q: Could you explain the <code class="language-plaintext highlighter-rouge">+</code> in front of <code class="language-plaintext highlighter-rouge">event.target...</code>?</p>

<p>A: The <code class="language-plaintext highlighter-rouge">+</code> there is to turn the string that is returned from <code class="language-plaintext highlighter-rouge">event.target.dataset.index</code> into a number. It is called the unary plus operator. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Unary_plus">See MDN for more information about the unary plus operator</a>. Another approach to this event handler could look like this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//...</span>
<span class="nx">handleIndexClick</span> <span class="o">=</span> <span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
        <span class="na">active</span><span class="p">:</span> <span class="nx">index</span>
    <span class="p">})</span>
<span class="p">}</span>
<span class="c1">//...</span>
<span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleIndexClick</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">index</span><span class="p">)}</span>
<span class="c1">//...</span></code></pre></figure>

<p>Why we didn‚Äôt go straight to that method is because <code class="language-plaintext highlighter-rouge">bind</code> used to be very ‚Äòexpensive‚Äô to use. It used to be one of the slowest things you could do in Chrome. It has been fixed, but in old browsers, using the above example is really slow, so the best recommended practice is to not do it that way.</p>

<h3 id="carousel-implementation">Carousel Implementation</h3>

<p>Open up <code class="language-plaintext highlighter-rouge">Details.js</code> and add this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//...</span>
<span class="k">import</span> <span class="nx">Carousel</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./Carousel</span><span class="dl">"</span><span class="p">;</span>
<span class="c1">//... add media</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">animal</span><span class="p">,</span> <span class="nx">breed</span><span class="p">,</span> <span class="nx">location</span><span class="p">,</span> <span class="nx">description</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">media</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
<span class="c1">//... place this just inside of the &lt;div className="details"&gt;</span>
<span class="o">&lt;</span><span class="nx">Carousel</span> <span class="nx">media</span><span class="o">=</span><span class="p">{</span><span class="nx">media</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span><span class="c1">//...</span></code></pre></figure>

<p>In <code class="language-plaintext highlighter-rouge">Details.js</code> we‚Äôve imported the Carousel component, added <code class="language-plaintext highlighter-rouge">media</code> to our state, and finally added the Carousel component to the render. If you refresh or load a details page, you should be able to see all of the images for any given pet, displayed in a carousel-like format. Here‚Äôs the entire <code class="language-plaintext highlighter-rouge">Details.js</code> file in case something is not working:</p>

<details>
    <summary>Click to view the current state of <code class="language-plaintext highlighter-rouge">Details.js</code>
</summary>
    
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">pet</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@frontendmasters/pet</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Carousel</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./Carousel</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">Details</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="na">loading</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>
  <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">pet</span><span class="p">.</span><span class="nx">animal</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">then</span><span class="p">(({</span> <span class="nx">animal</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
        <span class="na">name</span><span class="p">:</span> <span class="nx">animal</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
        <span class="na">animal</span><span class="p">:</span> <span class="nx">animal</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
        <span class="na">location</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">animal</span><span class="p">.</span><span class="nx">contact</span><span class="p">.</span><span class="nx">address</span><span class="p">.</span><span class="nx">city</span><span class="p">}</span><span class="s2">, </span><span class="p">${</span><span class="nx">animal</span><span class="p">.</span><span class="nx">contact</span><span class="p">.</span><span class="nx">address</span><span class="p">.</span><span class="nx">state</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
        <span class="na">description</span><span class="p">:</span> <span class="nx">animal</span><span class="p">.</span><span class="nx">description</span><span class="p">,</span>
        <span class="na">media</span><span class="p">:</span> <span class="nx">animal</span><span class="p">.</span><span class="nx">photos</span><span class="p">,</span>
        <span class="na">breed</span><span class="p">:</span> <span class="nx">animal</span><span class="p">.</span><span class="nx">breeds</span><span class="p">.</span><span class="nx">primary</span><span class="p">,</span>
        <span class="na">loading</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="p">});</span>
    <span class="p">},</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">loading</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">loading</span> <span class="p">...</span><span class="o">&lt;</span><span class="sr">/h1&gt;</span><span class="err">;
</span>    <span class="p">}</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">animal</span><span class="p">,</span> <span class="nx">breed</span><span class="p">,</span> <span class="nx">location</span><span class="p">,</span> <span class="nx">description</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">media</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">details</span><span class="dl">"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Carousel</span> <span class="nx">media</span><span class="o">=</span><span class="p">{</span><span class="nx">media</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="p">{</span><span class="s2">`</span><span class="p">${</span><span class="nx">animal</span><span class="p">}</span><span class="s2"> - </span><span class="p">${</span><span class="nx">breed</span><span class="p">}</span><span class="s2"> - </span><span class="p">${</span><span class="nx">location</span><span class="p">}</span><span class="s2">`</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h2</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">button</span><span class="o">&gt;</span><span class="nx">Adopt</span> <span class="p">{</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">description</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">Details</span><span class="p">;</span></code></pre></figure>


</details>

<h2 id="error-boundaries">Error Boundaries</h2>

<h3 id="error-boundaries-1">Error Boundaries</h3>

<p>Error boundaries is one of the things that hooks cannot do, you cannot do error boundaries without using classes. This is especially critical in React applications where we are using state, let‚Äôs have a look at how to make it. Make a new file <code class="language-plaintext highlighter-rouge">ErrorBoundary.js</code>. This is mostly code from the React documentation. Thanks Brian‚Ä¶ Make your <code class="language-plaintext highlighter-rouge">ErrorBoundary.js</code> file like this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Link</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@reach/router</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">ErrorBoundary</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="na">hasError</span><span class="p">:</span> <span class="kc">false</span> <span class="p">};</span>
  <span class="kd">static</span> <span class="nx">getDerivedStateFromError</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span> <span class="na">hasError</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">componentDidCatch</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">info</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">ErrorBoundary caught an error</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">,</span> <span class="nx">info</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">hasError</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span>
          <span class="nx">There</span> <span class="nx">was</span> <span class="nx">an</span> <span class="nx">error</span> <span class="kd">with</span> <span class="k">this</span> <span class="nx">listing</span><span class="p">.</span> <span class="o">&lt;</span><span class="nx">Link</span> <span class="nx">to</span><span class="o">=</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Click</span> <span class="nx">here</span><span class="o">&lt;</span><span class="sr">/Link&gt;{" "</span><span class="err">}
</span>          <span class="nx">to</span> <span class="nx">go</span> <span class="nx">back</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">home</span> <span class="nx">page</span> <span class="nx">or</span> <span class="nx">wait</span> <span class="nx">five</span> <span class="nx">seconds</span><span class="p">.</span>
        <span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">ErrorBoundary</span><span class="p">;</span></code></pre></figure>

<p>Here‚Äôs an attempt to explain what is happening above. <code class="language-plaintext highlighter-rouge">import</code> React and Component from React, <code class="language-plaintext highlighter-rouge">import</code> Link from React Router. Make a class component called ErrorBoundary and give it some state, <code class="language-plaintext highlighter-rouge">hasError</code>, set to false. Set up <code class="language-plaintext highlighter-rouge">getDerivedStateFromError</code> to update <code class="language-plaintext highlighter-rouge">hasError</code> to true if an error exists. Then if there is an error <code class="language-plaintext highlighter-rouge">this.state.hasError</code>, render some text with a link back to the home page, otherwise, render the children.</p>

<h3 id="error-boundary-middleware">Error Boundary Middleware</h3>

<p>The first component that we want to wrap with <code class="language-plaintext highlighter-rouge">ErrorBoundary.js</code> is the Details component. In <code class="language-plaintext highlighter-rouge">Details.js</code>, first import <code class="language-plaintext highlighter-rouge">ErrorBoundary</code>: <code class="language-plaintext highlighter-rouge">import ErrorBoundary from "./ErrorBoundary";</code>, then update the export statement at the bottom of <code class="language-plaintext highlighter-rouge">Details.js</code> to this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">DetailsWithErrorBoundary</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">ErrorBoundary</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">Details</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/ErrorBoundary</span><span class="err">&gt;
</span>    <span class="p">)</span>
<span class="p">}</span></code></pre></figure>

<p>Now when your application has an error, you <em>should</em> see the <code class="language-plaintext highlighter-rouge">&lt;h1&gt;</code> from the ErrorBoundary component render on the page. Doesn‚Äôt work for me (when there is an API error), so I clearly did something wrong üò©. But I was able to update the error handling like this:</p>

<details>
    <summary>Click to view the updated error handling I came up with for <code class="language-plaintext highlighter-rouge">Details.js</code>
</summary>
    
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">pet</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@frontendmasters/pet</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Carousel</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./Carousel</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">ErrorBoundary</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./ErrorBoundary</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">Details</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="na">loading</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">pet</span>
      <span class="p">.</span><span class="nx">animal</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(({</span> <span class="nx">animal</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
          <span class="na">name</span><span class="p">:</span> <span class="nx">animal</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
          <span class="na">animal</span><span class="p">:</span> <span class="nx">animal</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
          <span class="na">location</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">animal</span><span class="p">.</span><span class="nx">contact</span><span class="p">.</span><span class="nx">address</span><span class="p">.</span><span class="nx">city</span><span class="p">}</span><span class="s2">, </span><span class="p">${</span><span class="nx">animal</span><span class="p">.</span><span class="nx">contact</span><span class="p">.</span><span class="nx">address</span><span class="p">.</span><span class="nx">state</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
          <span class="na">description</span><span class="p">:</span> <span class="nx">animal</span><span class="p">.</span><span class="nx">description</span><span class="p">,</span>
          <span class="na">media</span><span class="p">:</span> <span class="nx">animal</span><span class="p">.</span><span class="nx">photos</span><span class="p">,</span>
          <span class="na">breed</span><span class="p">:</span> <span class="nx">animal</span><span class="p">.</span><span class="nx">breeds</span><span class="p">.</span><span class="nx">primary</span><span class="p">,</span>
          <span class="na">loading</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="p">});</span>
      <span class="p">})</span>
      <span class="c1">// this catch helped to set a new property to state which the</span>
      <span class="c1">// ErrorBoundary component can then use when a render is triggered</span>
      <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
          <span class="na">hasError</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="p">});</span>
      <span class="p">});</span>
  <span class="p">}</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// added &amp;&amp; !this.state.hasError which is initially unset,</span>
      <span class="c1">// so you will see loading ...</span>
      <span class="c1">// when the catch statement fails, hasError will then exist</span>
      <span class="c1">// which negates the statement and loads the ErrorBoundary component</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">loading</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">hasError</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">loading</span> <span class="p">...</span><span class="o">&lt;</span><span class="sr">/h1&gt;</span><span class="err">;
</span>    <span class="p">}</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">animal</span><span class="p">,</span> <span class="nx">breed</span><span class="p">,</span> <span class="nx">location</span><span class="p">,</span> <span class="nx">description</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">media</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">details</span><span class="dl">"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Carousel</span> <span class="nx">media</span><span class="o">=</span><span class="p">{</span><span class="nx">media</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="p">{</span><span class="s2">`</span><span class="p">${</span><span class="nx">animal</span><span class="p">}</span><span class="s2"> - </span><span class="p">${</span><span class="nx">breed</span><span class="p">}</span><span class="s2"> - </span><span class="p">${</span><span class="nx">location</span><span class="p">}</span><span class="s2">`</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h2</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">button</span><span class="o">&gt;</span><span class="nx">Adopt</span> <span class="p">{</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">description</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">DetailsWithErrorBoundary</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">ErrorBoundary</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Details</span> <span class="p">{...</span><span class="nx">props</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/ErrorBoundary</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span></code></pre></figure>


</details>

<h3 id="404-page-redirect">404 Page Redirect</h3>

<p>Let‚Äôs update the <code class="language-plaintext highlighter-rouge">ErrorBoundary.js</code> file with <del><code class="language-plaintext highlighter-rouge">componentWillUpdate</code></del> (deprecated) <code class="language-plaintext highlighter-rouge">componentDidUpdate</code> which will run every time the component receives new state or props. Update <code class="language-plaintext highlighter-rouge">ErrorBoundary.js</code> so that it looks like this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Link</span><span class="p">,</span> <span class="nx">Redirect</span><span class="p">,</span> <span class="nx">navigate</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@reach/router</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">ErrorBoundary</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="na">hasError</span><span class="p">:</span> <span class="kc">false</span> <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">static</span> <span class="nx">getDerivedStateFromError</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span> <span class="na">hasError</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">redirect</span><span class="p">:</span> <span class="kc">false</span> <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">componentDidCatch</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">info</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">ErrorBoundary caught an error</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">,</span> <span class="nx">info</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">componentDidUpdate</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">hasError</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">navigate</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">),</span> <span class="mi">5000</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">hasError</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span>
          <span class="nx">There</span> <span class="nx">was</span> <span class="nx">an</span> <span class="nx">error</span> <span class="kd">with</span> <span class="k">this</span> <span class="nx">listing</span><span class="p">.</span> <span class="o">&lt;</span><span class="nx">Link</span> <span class="nx">to</span><span class="o">=</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Click</span> <span class="nx">here</span><span class="o">&lt;</span><span class="sr">/Link&gt;{" "</span><span class="err">}
</span>          <span class="nx">to</span> <span class="nx">go</span> <span class="nx">back</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">home</span> <span class="nx">page</span> <span class="nx">or</span> <span class="nx">wait</span> <span class="nx">five</span> <span class="nx">seconds</span><span class="p">.</span>
        <span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">ErrorBoundary</span><span class="p">;</span></code></pre></figure>

<p>We added some imports to the React Router, <code class="language-plaintext highlighter-rouge">Redirect</code> (not needed if using <code class="language-plaintext highlighter-rouge">navigate</code>) and <code class="language-plaintext highlighter-rouge">navigate</code>. I could not get the Redirect to work by using <code class="language-plaintext highlighter-rouge">setState</code>, but it did work fine using <code class="language-plaintext highlighter-rouge">navigate</code>. The Redirect with <code class="language-plaintext highlighter-rouge">setState</code> looks like this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">componentDidUpdate</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">hasError</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="na">redirect</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}),</span> <span class="mi">5000</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="c1">//...</span>
<span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">redirect</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">&lt;</span><span class="nx">Redirect</span> <span class="nx">to</span><span class="o">=</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span> <span class="o">/&gt;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="c1">//...</span></code></pre></figure>

<h3 id="lifecycle-methods--error-boundary-qa">Lifecycle Methods &amp; Error Boundary Q&amp;A</h3>

<h2 id="context-1">Context</h2>

<h3 id="react-context">React Context</h3>

<h3 id="context-with-hooks">Context with Hooks</h3>

<h3 id="context-with-classes">Context with Classes</h3>

<h3 id="persisting-state-with-context-hooks">Persisting State with Context Hooks</h3>

<h2 id="portals">Portals</h2>

<h3 id="modal-dialog-with-portals">Modal Dialog with Portals</h3>

<h3 id="displaying-the-modal">Displaying the Modal</h3>

<h2 id="wrapping-up">Wrapping Up</h2>

<h3 id="wrapping-up-1">Wrapping Up</h3>

</div>
    </main><footer class="usa-footer usa-footer-medium" role="contentinfo"><div class="usa-grid usa-footer-return-to-top">
      <a href="#">Return to top</a>
    </div><div class="usa-footer-secondary_section">
    <div class="usa-grid">
      <div class="usa-footer-logo"><img class="usa-footer-logo-img" src="/assets/img/hztl-wm.svg" alt="HZTL-WM"><p>William has consumed <span class="la-croix"></span> cans of <a href="/la-croix" title="See all the cans of La Croix" alt="See all the cans of La Croix"><span class="la-croix-logo"></span></a> since Sept. 3rd, 2019.<br/><em class="lighten-up"> * cans of delicious, bubbly, essenced water consumed accurate by ¬±50%</em></p></div><div class="usa-footer-contact-links usa-width-one-half"></div>
    </div>
  </div></footer><script src="/assets/uswds/js/uswds.min.js"async></script><script src="/assets/js/la-croix.js"></script><script src="/assets/js/scroll-watch.js"></script></body>
</html>
